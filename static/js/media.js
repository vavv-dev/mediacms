!function(){var e,t={3683:function(e,t,n){"use strict";var r=n(2541),a=(n(2322),n(9268),n(9006),n(5090),n(5101),n(3080),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655),n(5466)),i=n(3613),o=n(8578);function l(){return a.createElement("div",{className:"player-container viewer-attachment-container"},a.createElement("div",{className:"player-container-inner"},a.createElement("span",null,a.createElement("span",null,a.createElement("i",{className:"material-icons"},"insert_drive_file")))))}var u=n(3074),s=n.n(u),c=n(8009),d=n.n(c),m=n(473),f=n(541),p=n(9722);function y(e){var t=null,n=e.split(".");if(n.length)switch(n=n[n.length-1]){case"webm":t="audio/webm";break;case"flac":t="audio/flac";break;case"wave":t="audio/wave";break;case"wav":t="audio/wav";break;case"ogg":case"ogg":t="audio/ogg";break;case"mp3":case"mpeg":t="audio/mpeg"}return t}var h=n(1283);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,r,l,u=(r=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(l){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=u.call(this,e);var n=o.MediaPageStore.get("media-data");t.AudioPlayerData={},t.audioStartedPlaying=!1;var r=(0,m.formatInnerLink)(n.original_media_url,i.SiteContext._currentValue.url);t.videoSources=[{src:r,type:y(r)}],t.videoPoster=n.poster_url,t.videoPoster=t.videoPoster?t.videoPoster:n.thumbnail_url,t.videoPoster=t.videoPoster?(0,m.formatInnerLink)(t.videoPoster,i.SiteContext._currentValue.url):"",t.updatePlayerVolume=t.updatePlayerVolume.bind(S(t)),t.onAudioEnd=t.onAudioEnd.bind(S(t)),t.onAudioRestart=t.onAudioRestart.bind(S(t)),o.PageStore.on("switched_media_auto_play",t.onUpdateMediaAutoPlay.bind(S(t))),t.wrapperClick=t.wrapperClick.bind(S(t));var a=new p.MediaDurationInfo;return a.update(o.MediaPageStore.get("media-data").duration),t.durationISO8601=a.ISO8601(),t}return t=s,(n=[{key:"componentDidMount",value:function(){this.videoSources.length||h.warn("Audio DEBUG:","Audio file doesn't exist"),this.recommendedMedia=o.MediaPageStore.get("media-data").related_media.length?new p.PlayerRecommendedMedia(o.MediaPageStore.get("media-data").related_media,this.refs.AudioElem.parentNode,this.props.inEmbed):null,this.upNextLoaderView=!this.props.inEmbed&&o.MediaPageStore.get("media-data").related_media.length?new p.UpNextLoaderView(o.MediaPageStore.get("media-data").related_media[0]):null,document.hasFocus()||"visible"===document.visibilityState?this.initPlayerInstance():(this.initPlayerInstance=this.initPlayerInstance.bind(this),window.addEventListener("focus",this.initPlayerInstance),document.addEventListener("visibilitychange",this.initPlayerInstance))}},{key:"componentWillUnmount",value:function(){this.recommendedMedia&&(this.AudioPlayerData.instance.player.off("fullscreenchange",this.recommendedMedia.onResize),o.PageStore.removeListener("window_resize",this.recommendedMedia.onResize),o.VideoViewerStore.removeListener("changed_viewer_mode",this.recommendedMedia.onResize),this.recommendedMedia.destroy()),videojs(this.refs.AudioElem).dispose(),this.AudioPlayerData.instance=null,delete this.AudioPlayerData.instance}},{key:"initPlayerInstance",value:function(){window.removeEventListener("focus",this.initPlayerInstance),document.removeEventListener("visibilitychange",this.initPlayerInstance),this.refs.AudioElem.focus(),this.initPlayerInstance=null,setTimeout(function(){if(!this.AudioPlayerData.instance){var e=this.props.inEmbed?document.createElement("a"):null,t=this.props.inEmbed?document.createElement("a"):null;e&&(e.setAttribute("class","title-link"),e.setAttribute("href",o.MediaPageStore.get("media-data").url),e.setAttribute("title",o.MediaPageStore.get("media-data").title),e.setAttribute("target","_blank"),e.innerHTML=o.MediaPageStore.get("media-data").title),t&&(t.setAttribute("class","user-thumb-link"),t.setAttribute("href",o.MediaPageStore.get("media-data").author_profile),t.setAttribute("title",o.MediaPageStore.get("media-data").author_name),t.setAttribute("target","_blank"),t.innerHTML='<img src="'+o.MediaPageStore.get("media-author-thumbnail-url")+'" alt="" />');var n=null,r=null;!this.props.inEmbed&&o.MediaPageStore.get("playlist-id")?(n=o.MediaPageStore.get("playlist-next-media-url"),r=o.MediaPageStore.get("playlist-previous-media-url")):n=o.MediaPageStore.get("media-data").related_media.length&&!this.props.inEmbed?o.MediaPageStore.get("media-data").related_media[0].url:null,this.AudioPlayerData.instance=new(d())(this.refs.AudioElem,{sources:this.videoSources,poster:this.videoPoster,autoplay:!this.props.inEmbed,bigPlayButton:!0,controlBar:{fullscreen:!1,theaterMode:!1,next:!!n,previous:!!r},cornerLayers:{topLeft:e,topRight:this.upNextLoaderView?this.upNextLoaderView.html():null,bottomLeft:this.recommendedMedia?this.recommendedMedia.html():null,bottomRight:t}},{volume:o.VideoViewerStore.get("player-volume"),soundMuted:o.VideoViewerStore.get("player-sound-muted")},null,null,this.onAudioPlayerStateUpdate.bind(this),this.onClickNextButton.bind(this),this.onClickPreviousButton.bind(this)),this.upNextLoaderView&&(this.upNextLoaderView.setVideoJsPlayerElem(this.AudioPlayerData.instance.player.el_),this.onUpdateMediaAutoPlay()),this.refs.AudioElem.parentNode.focus(),this.AudioPlayerData.instance.player.one("play",function(){this.audioStartedPlaying=!0}.bind(this)),this.recommendedMedia&&(this.recommendedMedia.initWrappers(this.AudioPlayerData.instance.player.el_),this.AudioPlayerData.instance.player.one("pause",this.recommendedMedia.init),this.AudioPlayerData.instance.player.on("fullscreenchange",this.recommendedMedia.onResize),o.PageStore.on("window_resize",this.recommendedMedia.onResize),o.VideoViewerStore.on("changed_viewer_mode",this.recommendedMedia.onResize)),this.AudioPlayerData.instance.player.one("ended",this.onAudioEnd)}}.bind(this),50)}},{key:"initialDocumentFocus",value:function(){this.refs.AudioElem.parentNode&&(this.refs.AudioElem.parentNode.focus(),setTimeout(function(){this.AudioPlayerData.instance.player.play()}.bind(this),50)),window.removeEventListener("focus",this.initialDocumentFocus),this.initialDocumentFocus=null}},{key:"onClickNextButton",value:function(){var e;o.MediaPageStore.get("playlist-id")?null===(e=o.MediaPageStore.get("playlist-next-media-url"))&&(e=o.MediaPageStore.get("media-data").related_media[0].url):this.props.inEmbed||(e=o.MediaPageStore.get("media-data").related_media[0].url),window.location.href=e}},{key:"onClickPreviousButton",value:function(){var e;o.MediaPageStore.get("playlist-id")?null===(e=o.MediaPageStore.get("playlist-previous-media-url"))&&(e=o.MediaPageStore.get("media-data").related_media[0].url):this.props.inEmbed||(e=o.MediaPageStore.get("media-data").related_media[0].url),window.location.href=e}},{key:"onUpdateMediaAutoPlay",value:function(){this.upNextLoaderView&&(o.PageStore.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.AudioPlayerData.instance.isEnded()):this.upNextLoaderView.hideTimerView())}},{key:"onAudioPlayerStateUpdate",value:function(e){this.updatePlayerVolume(e.volume,e.soundMuted)}},{key:"onAudioRestart",value:function(){this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("inline"),this.AudioPlayerData.instance.player.one("pause",this.recommendedMedia.init),this.AudioPlayerData.instance.player.one("ended",this.onAudioEnd))}},{key:"onAudioEnd",value:function(){if(this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("full"),this.AudioPlayerData.instance.player.one("playing",this.onAudioRestart)),!this.props.inEmbed&&o.MediaPageStore.get("playlist-id")){var e=document.querySelector(".video-player .more-media"),t=document.querySelector(".video-player .vjs-actions-anim");this.upNextLoaderView.cancelTimer();var n=o.MediaPageStore.get("playlist-next-media-url");return n&&(e&&(e.style.display="none"),t&&(t.style.display="none"),window.location.href=n),void this.upNextLoaderView.hideTimerView()}this.upNextLoaderView&&(o.PageStore.get("media-auto-play")?(this.upNextLoaderView.startTimer(),this.AudioPlayerData.instance.player.one("play",function(){this.upNextLoaderView.cancelTimer()}.bind(this))):this.upNextLoaderView.cancelTimer())}},{key:"updatePlayerVolume",value:function(e,t){o.VideoViewerStore.get("player-volume")!==e&&f.VideoViewerActions.set_player_volume(e),o.VideoViewerStore.get("player-sound-muted")!==t&&f.VideoViewerActions.set_player_sound_muted(t)}},{key:"wrapperClick",value:function(e){e.target.parentNode===this.refs.videoPlayerWrap&&(this.AudioPlayerData.instance.player.ended()||(!this.AudioPlayerData.instance.player.hasStarted_||this.AudioPlayerData.instance.player.paused()?this.AudioPlayerData.instance.player.play():this.AudioPlayerData.instance.player.pause()))}},{key:"render",value:function(){return a.createElement("div",{className:"player-container audio-player-container"},a.createElement("div",{className:"player-container-inner"},a.createElement("div",{className:"video-player",ref:"videoPlayerWrap",onClick:this.wrapperClick},a.createElement("audio",{tabIndex:"1",ref:"AudioElem",className:"video-js vjs-mediacms native-dimensions"}))))}}])&&v(t.prototype,n),s}(a.PureComponent);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){var t=(0,a.useContext)(i.SiteContext),n=m();n=(n=n||o.MediaPageStore.get("media-data").thumbnail_url)||"";var r,l,u=(r=(0,a.useState)(n),l=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(r,l)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(r,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],c=u[1];function d(){c(m())}function m(){var e=o.MediaPageStore.get("media-data"),n="string"==typeof e.poster_url?e.poster_url.trim():"";return""===n&&(n="string"==typeof e.thumbnail_url?e.thumbnail_url.trim():""),""===n&&(n="string"==typeof o.MediaPageStore.get("media-original-url")?o.MediaPageStore.get("media-original-url").trim():""),""===n?"#":t.url+"/"+n.replace(/^\//g,"")}return(0,a.useEffect)((function(){return o.MediaPageStore.on("loaded_image_data",d),function(){return o.MediaPageStore.removeListener("loaded_image_data",d)}}),[]),s?a.createElement("div",{className:"viewer-image-container"},a.createElement("img",{src:s,alt:o.MediaPageStore.get("media-data").title||null})):null}function M(){return a.createElement("div",{className:"player-container viewer-pdf-container"},a.createElement("div",{className:"player-container-inner"},a.createElement("span",null,a.createElement("span",null,a.createElement("i",{className:"material-icons"},"insert_drive_file")))))}P.defaultProps={inEmbed:!1},P.propTypes={inEmbed:s().bool},n(3233),n(3296),n(288),n(4458),n(3675),n(9751);var A=n(9905),C=n(8727),x=n(5170),N=n(1283);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(s,e);var t,n,r,l,u=(r=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(l){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).state={displayPlayer:!1,playerInit:!1},t.videoSources=[],function(e){switch(e){case"running":o.MediaPageStore.set("media-load-error-type","encodingRunning"),o.MediaPageStore.set("media-load-error-message","Media encoding is currently running. Try again in few minutes.");break;case"pending":o.MediaPageStore.set("media-load-error-type","encodingPending"),o.MediaPageStore.set("media-load-error-message","Media encoding is pending");break;case"fail":o.MediaPageStore.set("media-load-error-type","encodingFailed"),o.MediaPageStore.set("media-load-error-message","Media encoding failed")}}(t.props.data.encoding_status),null!==o.MediaPageStore.get("media-load-error-type"))return t.state.displayPlayer=!0,j(t);if("string"==typeof t.props.data.poster_url?t.videoPoster=(0,m.formatInnerLink)(t.props.data.poster_url,t.props.siteUrl):"string"==typeof t.props.data.thumbnail_url&&(t.videoPoster=(0,m.formatInnerLink)(t.props.data.thumbnail_url,t.props.siteUrl)),t.videoInfo=(0,A.RA)(t.props.data.encodings_info,t.props.data.hls_info),Object.keys(t.videoInfo).length){var n=o.VideoViewerStore.get("video-quality");(null===n||"Auto"===n&&void 0===t.videoInfo.Auto)&&(n=720);var r=(0,A.$e)(n,t.videoInfo);"Auto"===n&&void 0!==t.videoInfo.Auto&&t.videoSources.push({src:t.videoInfo.Auto.url[0]});var a,l,c=(0,A.KC)();for(l=0;l<t.videoInfo[r].format.length;){if("hls"===t.videoInfo[r].format[l]){t.videoSources.push({src:t.videoInfo[r].url[l]});break}l+=1}for(l in t.props.data.encodings_info[r])t.props.data.encodings_info[r].hasOwnProperty(l)&&c.support[l]&&(a=t.props.data.encodings_info[r][l].url)&&(a=(0,m.formatInnerLink)(a,t.props.siteUrl),t.videoSources.push({src:a,encodings_status:t.props.data.encodings_info[r][l].status}))}else t.videoInfo=null;if(t.videoSources.length){if(!t.props.inEmbed&&1===t.videoSources.length&&"running"===t.videoSources[0].encodings_status)return o.MediaPageStore.set("media-load-error-type","encodingRunning"),o.MediaPageStore.set("media-load-error-message","Media encoding is currently running. Try again in few minutes."),j(t)}else switch(o.MediaPageStore.get("media-load-error-type")){case"encodingRunning":case"encodingPending":case"encodingFailed":break;default:N.warn("VIDEO DEBUG:","Video files don't exist")}o.PageStore.on("switched_media_auto_play",t.onUpdateMediaAutoPlay.bind(R(t))),t.browserCache=new p.BrowserCache(i.SiteContext._currentValue.id,86400);var d=new p.MediaDurationInfo;return d.update(t.props.data.duration),t.durationISO8601=d.ISO8601(),t.playerElem=null,t.playerInstance=null,t.onPlayerInit=t.onPlayerInit.bind(R(t)),t.onClickNext=t.onClickNext.bind(R(t)),t.onClickPrevious=t.onClickPrevious.bind(R(t)),t.onStateUpdate=t.onStateUpdate.bind(R(t)),t.onVideoEnd=t.onVideoEnd.bind(R(t)),t.onVideoRestart=t.onVideoRestart.bind(R(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){if(this.videoSources.length){this.recommendedMedia=this.props.data.related_media.length?new p.PlayerRecommendedMedia(this.props.data.related_media,this.props.inEmbed,!o.PageStore.get("config-media-item").displayViews):null,this.upNextLoaderView=!this.props.inEmbed&&this.props.data.related_media.length?new p.UpNextLoaderView(this.props.data.related_media[0]):null;var e=null;if(this.props.inEmbed){var t=document.createElement("a"),n=document.createElement("a");(e=document.createElement("div")).setAttribute("class","media-links-top-left"),t&&(t.setAttribute("class","title-link"),t.setAttribute("href",this.props.data.url),t.setAttribute("title",this.props.data.title),t.setAttribute("target","_blank"),t.innerHTML=this.props.data.title),n&&(n.setAttribute("class","user-thumb-link"),n.setAttribute("href",(0,m.formatInnerLink)(this.props.data.author_profile,this.props.siteUrl)),n.setAttribute("title",this.props.data.author_name),n.setAttribute("target","_blank"),n.setAttribute("style","background-image:url("+(0,m.formatInnerLink)(o.MediaPageStore.get("media-author-thumbnail-url"),this.props.siteUrl)+")")),e.appendChild(n),e.appendChild(t)}var r=o.MediaPageStore.get("media-url"),a='<button class="share-video-btn"><i class="material-icons">share</i><span>Share</span></button>';a+='<div class="share-options-wrapper">\t\t\t\t\t\t\t\t\t<div class="share-options">\t\t\t\t\t\t\t\t\t\t<div class="share-options-inner">\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-email">\t\t\t\t\t\t\t\t\t\t\t\t<a href="mailto:?body='+r+'" title=""><span><i class="material-icons">email</i></span><span>Email</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-fb">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.facebook.com/sharer.php?u='+r+'" title="" target="_blank"><span></span><span>Facebook</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-tw">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://twitter.com/intent/tweet?url='+r+'" title="" target="_blank"><span></span><span>Twitter</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-whatsapp">\t\t\t\t\t\t\t\t\t\t\t\t<a href="whatsapp://send?text='+r+'" title="" target="_blank" data-action="share/whatsapp/share"><span></span><span>WhatsApp</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-telegram">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://t.me/share/url?url='+r+"&amp;text="+this.props.data.title+'" title="" target="_blank"><span></span><span>Telegram</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-linkedin">\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.linkedin.com/shareArticle?mini=true&amp;url='+r+'" title="" target="_blank"><span></span><span>LinkedIn</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-reddit">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://reddit.com/submit?url='+r+"&amp;title="+this.props.data.title+'" title="" target="_blank"><span></span><span>reddit</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-tumblr">\t\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl='+r+"&amp;title="+this.props.data.title+'" title="" target="_blank"><span></span><span>Tumblr</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-pinterest">\t\t\t\t\t\t\t\t\t\t\t\t<a href="http://pinterest.com/pin/create/link/?url='+r+'" title="" target="_blank"><span></span><span>Pinterest</span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="sh-option share-more">\t\t\t\t\t\t\t\t\t\t\t\t<a href="'+r+'" title="More" target="_blank"><span><i class="material-icons">more_horiz</i></span><span></span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>',this.cornerLayers={topLeft:e,topRight:this.upNextLoaderView?this.upNextLoaderView.html():null,bottomLeft:this.recommendedMedia?this.recommendedMedia.html():null,bottomRight:this.props.inEmbed?a:null},this.setState({displayPlayer:!0},(function(){setTimeout((function(){var e=document.querySelector(".share-video-btn"),t=document.querySelector(".share-options-wrapper"),n=document.querySelector(".share-options-inner");e&&e.addEventListener("click",(function(e){(0,m.addClassname)(document.querySelector(".video-js.vjs-mediacms"),"vjs-visible-share-options")})),t&&t.addEventListener("click",(function(e){e.target!==n&&e.target!==t||(0,m.removeClassname)(document.querySelector(".video-js.vjs-mediacms"),"vjs-visible-share-options")}))}),1e3)}))}}},{key:"componentWillUnmount",value:function(){this.unsetRecommendedMedia()}},{key:"initRecommendedMedia",value:function(){null!==this.recommendedMedia&&(this.props.inEmbed||this.recommendedMedia.init(),this.playerInstance.player.on("fullscreenchange",this.recommendedMedia.onResize),o.PageStore.on("window_resize",this.recommendedMedia.onResize),o.VideoViewerStore.on("changed_viewer_mode",this.recommendedMedia.onResize))}},{key:"unsetRecommendedMedia",value:function(){null!==this.recommendedMedia&&(this.playerInstance.player.off("fullscreenchange",this.recommendedMedia.onResize),o.PageStore.removeListener("window_resize",this.recommendedMedia.onResize),o.VideoViewerStore.removeListener("changed_viewer_mode",this.recommendedMedia.onResize),this.recommendedMedia.destroy())}},{key:"onClickNext",value:function(){var e;o.MediaPageStore.get("playlist-id")?null===(e=o.MediaPageStore.get("playlist-next-media-url"))&&(e=this.props.data.related_media[0].url):this.props.inEmbed||(e=this.props.data.related_media[0].url),window.location.href=e}},{key:"onClickPrevious",value:function(){var e;o.MediaPageStore.get("playlist-id")?null===(e=o.MediaPageStore.get("playlist-previous-media-url"))&&(e=this.props.data.related_media[0].url):this.props.inEmbed||(e=this.props.data.related_media[0].url),window.location.href=e}},{key:"onStateUpdate",value:function(e){o.VideoViewerStore.get("in-theater-mode")!==e.theaterMode&&f.VideoViewerActions.set_viewer_mode(e.theaterMode),o.VideoViewerStore.get("player-volume")!==e.volume&&f.VideoViewerActions.set_player_volume(e.volume),o.VideoViewerStore.get("player-sound-muted")!==e.soundMuted&&f.VideoViewerActions.set_player_sound_muted(e.soundMuted),o.VideoViewerStore.get("video-quality")!==e.quality&&f.VideoViewerActions.set_video_quality(e.quality),o.VideoViewerStore.get("video-playback-speed")!==e.playbackSpeed&&f.VideoViewerActions.set_video_playback_speed(e.playbackSpeed)}},{key:"onPlayerInit",value:function(e,t){this.playerElem=t,this.playerInstance=e,this.upNextLoaderView&&(this.upNextLoaderView.setVideoJsPlayerElem(this.playerInstance.player.el_),this.onUpdateMediaAutoPlay()),this.props.inEmbed||this.playerElem.parentNode.focus(),null!==this.recommendedMedia&&(this.recommendedMedia.initWrappers(this.playerElem.parentNode),this.props.inEmbed&&(this.playerInstance.player.one("pause",this.recommendedMedia.init),this.initRecommendedMedia())),this.playerInstance.player.one("ended",this.onVideoEnd),this.setState({playerInit:!0})}},{key:"onVideoRestart",value:function(){null!==this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("inline"),this.props.inEmbed&&this.playerInstance.player.one("pause",this.recommendedMedia.init),this.playerInstance.player.one("ended",this.onVideoEnd))}},{key:"onVideoEnd",value:function(){if(null!==this.recommendedMedia&&(this.props.inEmbed||this.initRecommendedMedia(),this.recommendedMedia.updateDisplayType("full"),this.playerInstance.player.one("playing",this.onVideoRestart)),!this.props.inEmbed&&o.MediaPageStore.get("playlist-id")){var e=document.querySelector(".video-player .more-media"),t=document.querySelector(".video-player .vjs-actions-anim");this.upNextLoaderView.cancelTimer();var n=o.MediaPageStore.get("playlist-next-media-url");return n&&(e&&(e.style.display="none"),t&&(t.style.display="none"),window.location.href=n),void this.upNextLoaderView.hideTimerView()}this.upNextLoaderView&&(o.PageStore.get("media-auto-play")?(this.upNextLoaderView.startTimer(),this.playerInstance.player.one("play",function(){this.upNextLoaderView.cancelTimer()}.bind(this))):this.upNextLoaderView.cancelTimer())}},{key:"onUpdateMediaAutoPlay",value:function(){this.upNextLoaderView&&(o.PageStore.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.playerInstance.isEnded()):this.upNextLoaderView.hideTimerView())}},{key:"render",value:function(){var e=this,t=null,n=null;!this.props.inEmbed&&o.MediaPageStore.get("playlist-id")?(t=o.MediaPageStore.get("playlist-next-media-url"),n=o.MediaPageStore.get("playlist-previous-media-url")):t=this.props.data.related_media.length&&!this.props.inEmbed?this.props.data.related_media[0].url:null;var r=this.props.data.sprites_url?{url:this.props.siteUrl+"/"+this.props.data.sprites_url.replace(/^\//g,""),frame:{width:160,height:90,seconds:10}}:null,l=a.createElement("div",{key:(this.props.inEmbed?"embed-":"")+"player-container",className:"player-container"+(this.videoSources.length?"":" player-container-error"),style:this.props.containerStyles,ref:"playerContainer"},a.createElement("div",{className:"player-container-inner",ref:"playerContainerInner",style:this.props.containerStyles},this.state.displayPlayer&&null!==o.MediaPageStore.get("media-load-error-type")?a.createElement(C.hJ,{errorMessage:o.MediaPageStore.get("media-load-error-message")}):null,this.state.displayPlayer&&null==o.MediaPageStore.get("media-load-error-type")?a.createElement("div",{className:"video-player",ref:"videoPlayerWrapper",key:"videoPlayerWrapper"},a.createElement(i.SiteConsumer,null,(function(i){return a.createElement(C.Y7,{playerVolume:e.browserCache.get("player-volume"),playerSoundMuted:e.browserCache.get("player-sound-muted"),videoQuality:e.browserCache.get("video-quality"),videoPlaybackSpeed:parseInt(e.browserCache.get("video-playback-speed"),10),inTheaterMode:e.browserCache.get("in-theater-mode"),siteId:i.id,siteUrl:i.url,info:e.videoInfo,cornerLayers:e.cornerLayers,sources:e.videoSources,poster:e.videoPoster,previewSprite:r,subtitlesInfo:e.props.data.subtitles_info,enableAutoplay:!e.props.inEmbed,inEmbed:e.props.inEmbed,hasTheaterMode:!e.props.inEmbed,hasNextLink:!!t,hasPreviousLink:!!n,errorMessage:o.MediaPageStore.get("media-load-error-message"),onClickNextCallback:e.onClickNext,onClickPreviousCallback:e.onClickPrevious,onStateUpdateCallback:e.onStateUpdate,onPlayerInitCallback:e.onPlayerInit})}))):null));return a.createElement(a.Fragment,null,l,this.state.displayPlayer&&null==o.MediaPageStore.get("media-load-error-type")&&this.state.playerInit&&a.createElement(x.Z,{player:this.playerInstance.player}))}}])&&I(t.prototype,n),s}(a.PureComponent);function D(e){for(var t=null,n=[],r=location.search.substr(1).split("&"),a=0;a<r.length;a++)(n=r[a].split("="))[0]===e&&(t=decodeURIComponent(n[1]));return t}V.defaultProps={inEmbed:!0,siteUrl:s().string.isRequired},V.propTypes={inEmbed:s().bool},new MutationObserver((function(e,t){var n,r=document.querySelector(".video-js.vjs-mediacms video");if(r)return(n=videojs(r)).playsinline(!0),1==D("muted")&&n.muted(!0),D("time")>=0&&n.currentTime(D("time")),1==D("autoplay")&&n.play(),void t.disconnect()})).observe(document,{childList:!0,subtree:!0}),n(9808);var U,B,F=n(2546),z=n(4234),H=(n(7441),n(6453),n(7390),n(4669),n(2070),n(9511)),q=n(1530),W=n(3481),$=n(41),Z=(n(4486),n(6429),n(1283));function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}U=void 0,B=function(e){var t,n=(t=e)&&t.__esModule?t:{default:t},r="function"==typeof Symbol&&"symbol"===Y(Symbol.iterator)?function(e){return Y(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Y(e)},a={markerStyle:{width:"7px","border-radius":"30%","background-color":"red"},markerTip:{display:!0,text:function(e){return"Break: "+e.text},time:function(e){return e.time}},breakOverlay:{display:!0,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e,t){},markers:[]};function i(e){var t;try{t=e.getBoundingClientRect()}catch(e){t={top:0,bottom:0,left:0,width:0,height:0,right:0}}return t}var o=-1;n.default.plugin("markers",(function(e){if(!n.default.mergeOptions){var t=function(e){return!!e&&"object"===(void 0===e?"undefined":r(e))&&"[object Object]"===toString.call(e)&&e.constructor===Object};n.default.mergeOptions=function e(n,r){var a={};return[n,r].forEach((function(n){n&&Object.keys(n).forEach((function(r){var i=n[r];t(i)?(t(a[r])||(a[r]={}),a[r]=e(a[r],i)):a[r]=i}))})),a}}n.default.createEl||(n.default.createEl=function(e,t,r){var a=n.default.Player.prototype.createEl(e,t);return r&&Object.keys(r).forEach((function(e){a.setAttribute(e,r[e])})),a});var l=n.default.mergeOptions(a,e),u={},s=[],c=o,d=this,m=null,f=null,p=o;function y(){s.sort((function(e,t){return l.markerTip.time(e)-l.markerTip.time(t)}))}function h(e){e.forEach((function(e){var t;e.key=(t=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))),d.el().querySelector(".vjs-progress-holder").appendChild(function(e){var t=n.default.createEl("div",{},{"data-marker-key":e.key,"data-marker-time":l.markerTip.time(e)});return v(e,t),t.addEventListener("click",(function(t){var n=!1;if("function"==typeof l.onMarkerClick&&(n=!1===l.onMarkerClick(e)),!n){var r=this.getAttribute("data-marker-key");d.currentTime(l.markerTip.time(u[r]))}})),l.markerTip.display&&function(e){e.addEventListener("mouseover",(function(){var t=u[e.getAttribute("data-marker-key")];if(m){m.querySelector(".vjs-tip-inner").innerText=l.markerTip.text(t),m.style.left=g(t)+"%";var n=i(m),r=i(e);m.style.marginLeft=-parseFloat(n.width/2)+parseFloat(r.width/4)+"px",m.style.visibility="visible"}})),e.addEventListener("mouseout",(function(){m&&(m.style.visibility="hidden")}))}(t),t}(e)),u[e.key]=e,s.push(e)})),y()}function g(e){return l.markerTip.time(e)/d.duration()*100}function v(e,t){t.className="vjs-marker "+(e.class||""),Object.keys(l.markerStyle).forEach((function(e){t.style[e]=l.markerStyle[e]}));var n=e.time/d.duration();if((n<0||n>1)&&(t.style.display="none"),t.style.left=g(e)+"%",e.duration)t.style.width=e.duration/d.duration()*100+"%",t.style.marginLeft="0px";else{var r=i(t);t.style.marginLeft=r.width/2+"px"}}function b(e){f&&(p=o,f.style.visibility="hidden"),c=o;var t=[];e.forEach((function(e){var n=s[e];if(n){delete u[n.key],t.push(e);var r=d.el().querySelector(".vjs-marker[data-marker-key='"+n.key+"']");r&&r.parentNode.removeChild(r)}}));try{t.reverse(),t.forEach((function(e){s.splice(e,1)}))}catch(e){Z.log(e)}y()}function w(){if(l.breakOverlay.display&&!(c<0)){var e=d.currentTime(),t=s[c],n=l.markerTip.time(t);e>=n&&e<=n+l.breakOverlay.displayTime?(p!==c&&(p=c,f&&(f.querySelector(".vjs-break-overlay-text").innerHTML=l.breakOverlay.text(t))),f&&(f.style.visibility="visible")):(p=o,f&&(f.style.visibility="hidden"))}}function S(){!function(){if(s.length){var t=function(e){return e<s.length-1?l.markerTip.time(s[e+1]):d.duration()},n=d.currentTime(),r=o;if(c!==o){var a=t(c);if(n>=l.markerTip.time(s[c])&&n<a)return;if(c===s.length-1&&n===d.duration())return}if(n<l.markerTip.time(s[0]))r=o;else for(var i=0;i<s.length;i++)if(a=t(i),n>=l.markerTip.time(s[i])&&n<a){r=i;break}r!==c&&(r!==o&&e.onMarkerReached&&e.onMarkerReached(s[r],r),c=r)}}(),w(),e.onTimeUpdateAfterMarkerUpdate&&e.onTimeUpdateAfterMarkerUpdate()}d.on("loadedmetadata",(function(){l.markerTip.display&&(m=n.default.createEl("div",{className:"vjs-tip",innerHTML:"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>"}),d.el().querySelector(".vjs-progress-holder").appendChild(m)),d.markers.removeAll(),h(l.markers),l.breakOverlay.display&&(f=n.default.createEl("div",{className:"vjs-break-overlay",innerHTML:"<div class='vjs-break-overlay-text'></div>"}),Object.keys(l.breakOverlay.style).forEach((function(e){f&&(f.style[e]=l.breakOverlay.style[e])})),d.el().appendChild(f),p=o),S(),d.on("timeupdate",S),d.off("loadedmetadata")})),d.markers={getMarkers:function(){return s},next:function(){for(var e=d.currentTime(),t=0;t<s.length;t++){var n=l.markerTip.time(s[t]);if(n>e){d.currentTime(n);break}}},prev:function(){for(var e=d.currentTime(),t=s.length-1;t>=0;t--){var n=l.markerTip.time(s[t]);if(n+.5<e)return void d.currentTime(n)}},add:function(e){h(e)},remove:function(e){b(e)},removeAll:function(){for(var e=[],t=0;t<s.length;t++)e.push(t);b(e)},updateTime:function(e){!function(e){s.forEach((function(t){var n=d.el().querySelector(".vjs-marker[data-marker-key='"+t.key+"']"),r=l.markerTip.time(t);(e||n.getAttribute("data-marker-time")!==r)&&(v(t,n),n.setAttribute("data-marker-time",r))})),y()}(e)},reset:function(e){d.markers.removeAll(),h(e)},destroy:function(){d.markers.removeAll(),f&&f.remove(),m&&m.remove(),d.off("timeupdate",w),delete d.markers}}}))},"function"==typeof define&&n.amdO?define(["mediacms-player"],B):"undefined"!=typeof exports?B(n(8009)):(B((U=window).videojs),U.videojsMarkers={});var X="comment",ee="Comment",te="SUBMIT";function ne(e){var t=(0,a.useRef)(null),n=Q((0,a.useState)(""),2),r=n[0],l=n[1],u=Q((0,a.useState)(!1),2),s=u[0],c=u[1],d=Q((0,a.useState)(!1),2),m=d[0],p=d[1],y=Q((0,a.useState)(-1),2),h=y[0],g=y[1],v=Q((0,a.useState)(""),2),b=v[0],w=v[1],S=Q((0,a.useState)(i.MemberContext._currentValue.is.anonymous?i.LinksContext._currentValue.signin+"?next=/"+window.location.href.replace(i.SiteContext._currentValue.url,"").replace(/^\//g,""):null),1)[0];function E(){p(!0)}function P(){p(!1)}function k(){var e=G(o.MediaPageStore.get("users")),t=[];e.forEach((function(e){t.push({id:e.username,display:e.name})})),w(t)}function _(){t.current.style.height="";var e=t.current.scrollHeight,n=0<h?h:parseFloat(window.getComputedStyle(t.current).lineHeight);l(""),c(!1),g(n),t.current.style.height=Math.max(20,h*Math.ceil(e/n))+"px"}function M(){c(!1)}return(0,a.useEffect)((function(){return o.MediaPageStore.on("comment_submit",_),o.MediaPageStore.on("comment_submit_fail",M),!0===MediaCMS.features.media.actions.comment_mention&&o.MediaPageStore.on("users_load",k),function(){o.MediaPageStore.removeListener("comment_submit",_),o.MediaPageStore.removeListener("comment_submit_fail",M),!0===MediaCMS.features.media.actions.comment_mention&&o.MediaPageStore.removeListener("users_load",k)}})),i.MemberContext._currentValue.is.anonymous?a.createElement("div",{className:"comments-form"},a.createElement("div",{className:"comments-form-inner"},a.createElement(z.UserThumbnail,null),a.createElement("div",{className:"form"},a.createElement("a",{href:S,rel:"noffolow",className:"form-textarea-wrap",title:W.default.t("Add a comment...")},a.createElement("span",{className:"form-textarea"},W.default.t("Add a comment..."))),a.createElement("div",{className:"form-buttons"},a.createElement("a",{href:S,rel:"noffolow",className:"disabled"},W.default.t(te)))))):a.createElement("div",{className:"comments-form"},a.createElement("div",{className:"comments-form-inner"},a.createElement(z.UserThumbnail,null),a.createElement("div",{className:"form"},a.createElement("div",{className:"form-textarea-wrap"+(m?" focused":"")},MediaCMS.features.media.actions.comment_mention?a.createElement(H.r,{inputRef:t,className:"form-textarea",rows:"1",placeholder:W.default.t("Add a comment..."),value:r,onChange:function(e,n,r,a){t.current.style.height="",l(n),c(!0);var i=t.current.scrollHeight,o=0<h?h:parseFloat(window.getComputedStyle(t.current).lineHeight);g(o),t.current.style.height=Math.max(20,h*Math.ceil(i/o))+"px"},onFocus:E,onBlur:P},a.createElement(H.p,{data:b,markup:"@(___id___)[___display___]"})):a.createElement("textarea",{ref:t,className:"form-textarea",rows:"1",placeholder:W.default.t("Add a comment..."),value:r,onChange:function(e){t.current.style.height="";var n=t.current.scrollHeight,r=0<h?h:parseFloat(window.getComputedStyle(t.current).lineHeight);l(t.current.value),c(!0),g(r),t.current.style.height=Math.max(20,h*Math.ceil(n/r))+"px"},onFocus:E,onBlur:P})),a.createElement("div",{className:"form-buttons"},a.createElement("button",{className:""===r.trim()?"disabled":"",onClick:function(){if(s){var e=r.trim();""!==e&&f.MediaPageActions.submitComment(e)}}},W.default.t(te))))))}ne.propTypes={comment_type:s().oneOf(["new","reply"]),media_id:s().oneOfType([s().string,s().number]).isRequired,reply_comment_id:s().oneOfType([s().string,s().number])},ne.defaultProps={comment_type:"new"};function re(e){var t=Q((0,F.usePopup)(),3),n=t[0],r=t[1],o=t[2];return a.createElement("div",{className:"comment-actions"},i.MemberContext._currentValue.can.deleteComment?a.createElement("div",{className:"comment-action remove-comment"},a.createElement(o,{contentRef:n},a.createElement("button",null,W.default.t("DELETE COMMENT"))),a.createElement(r,{contentRef:n},a.createElement(z.PopupMain,null,a.createElement("div",{className:"popup-message"},a.createElement("span",{className:"popup-message-title"},W.default.t("Comment removal")),a.createElement("span",{className:"popup-message-main"},W.default.t("You're willing to remove ".concat(X," permanently?")))),a.createElement("hr",null),a.createElement("span",{className:"popup-message-bottom"},a.createElement("button",{className:"button-link cancel-comment-removal",onClick:function(){n.current.toggle()}},W.default.t("CANCEL")),a.createElement("button",{className:"button-link proceed-comment-removal",onClick:function(){n.current.toggle(),f.MediaPageActions.deleteComment(e.comment_id)}},W.default.t("PROCEED")))))):null)}function ae(e){var t,n=(0,a.useRef)(null),r=(0,a.useRef)(null),o=Q((0,a.useState)(!0),2),l=o[0],u=o[1],s=Q((0,a.useState)(!1),2),c=s[0];return s[1],(0,a.useEffect)((function(){return function(){}}),[]),a.createElement("div",{className:"comment"},a.createElement("div",{className:"comment-inner"},a.createElement("a",{className:"comment-author-thumb",href:e.author_link,title:e.author_name},a.createElement("img",{src:e.author_thumb,alt:e.author_name})),a.createElement("div",{className:"comment-content"},a.createElement("div",{className:"comment-meta"},a.createElement("div",{className:"comment-author"},a.createElement("a",{href:e.author_link,title:e.author_name},e.author_name)),a.createElement("div",{className:"comment-date"},(0,q.format)(new Date(e.publish_date),$.selected))),a.createElement("div",{ref:n,className:"comment-text"+(l?" show-all":"")},a.createElement("div",{ref:r,className:"comment-text-inner",dangerouslySetInnerHTML:(t=e.text,{__html:t.replace(/\n/g,"<br />")})})),c?a.createElement("button",{className:"toggle-more",onClick:function(){u(!l)}},W.default.t(l?"Show less":"Read more")):null,i.MemberContext._currentValue.can.deleteComment?a.createElement(re,{comment_id:e.comment_id}):null)))}ae.propTypes={comment_id:s().oneOfType([s().string,s().number]).isRequired,media_id:s().oneOfType([s().string,s().number]).isRequired,text:s().string,author_name:s().string,author_link:s().string,author_thumb:s().string,publish_date:s().oneOfType([s().string,s().number]),likes:s().number,dislikes:s().number},ae.defaultProps={author_name:"",author_link:"#",publish_date:0,likes:0,dislikes:0};var ie=function(e){var t=e.commentsLength;return a.createElement(a.Fragment,null,!i.MemberContext._currentValue.can.readComment||o.MediaPageStore.get("media-data").enable_comments?null:a.createElement("span",{className:"disabled-comments-msg"},"Comments are disabled"),i.MemberContext._currentValue.can.readComment&&(o.MediaPageStore.get("media-data").enable_comments||i.MemberContext._currentValue.can.editMedia)?a.createElement("h2",null,t?1<t?t+" "+W.default.t("Comments"):t+" "+W.default.t(ee):o.MediaPageStore.get("media-data").enable_comments?W.default.t("No comment yet"):""):null)};function oe(e){var t=Q((0,a.useState)(o.MediaPageStore.get("media-id")),2),n=t[0],r=(t[1],Q((0,a.useState)(i.MemberContext._currentValue.can.readComment?o.MediaPageStore.get("media-comments"):[]),2)),l=r[0],u=r[1],s=Q((0,a.useState)(!1),2),c=s[0],d=s[1];function m(){var e=G(o.MediaPageStore.get("media-comments"));u(G(e))}function p(e){m(),setTimeout((function(){return f.PageActions.addNotification(W.default.t("Comment added"),"commentSubmit")}),100)}function y(){setTimeout((function(){return f.PageActions.addNotification(W.default.t("Comment submition failed"),"commentSubmitFail")}),100)}function h(e){m(),setTimeout((function(){return f.PageActions.addNotification(W.default.t("Comment removed"),"commentDelete")}),100)}function g(e){setTimeout((function(){return f.PageActions.addNotification(W.default.t("Comment removal failed"),"commentDeleteFail")}),100)}return(0,a.useEffect)((function(){d(l.length&&i.MemberContext._currentValue.can.readComment&&(o.MediaPageStore.get("media-data").enable_comments||i.MemberContext._currentValue.can.editMedia))}),[l]),(0,a.useEffect)((function(){return o.MediaPageStore.on("comments_load",m),o.MediaPageStore.on("comment_submit",p),o.MediaPageStore.on("comment_submit_fail",y),o.MediaPageStore.on("comment_delete",h),o.MediaPageStore.on("comment_delete_fail",g),function(){o.MediaPageStore.removeListener("comments_load",m),o.MediaPageStore.removeListener("comment_submit",p),o.MediaPageStore.removeListener("comment_submit_fail",y),o.MediaPageStore.removeListener("comment_delete",h),o.MediaPageStore.removeListener("comment_delete_fail",g)}}),[]),a.createElement("div",{className:"comments-list"},a.createElement("div",{className:"comments-list-inner"},a.createElement(ie,{commentsLength:l.length}),o.MediaPageStore.get("media-data").enable_comments?a.createElement(ne,{media_id:n}):null,c?l.map((function(e){return a.createElement(ae,{key:e.uid,comment_id:e.uid,media_id:n,text:e.text,author_name:e.author_name,author_link:e.author_profile,author_thumb:i.SiteContext._currentValue.url+"/"+e.author_thumbnail_url.replace(/^\//g,""),publish_date:e.add_date,likes:0,dislikes:0})})):null))}var le=n(1283);function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e){var t,n,r=[];if(e.length)for(t=0,n=1<e.length?", ":"";t<e.length;)r[t]=a.createElement("div",{key:t},a.createElement("a",{href:e[t].url,title:e[t].title},e[t].title),t<e.length-1?n:""),t+=1;return r}function de(e){return a.createElement("div",{className:"media-author-banner"},a.createElement("div",null,a.createElement("a",{className:"author-banner-thumb",href:e.link||null,title:e.name},a.createElement("span",{style:{backgroundImage:"url("+e.thumb+")"}},a.createElement("img",{src:e.thumb,loading:"lazy",alt:e.name,title:e.name})))),a.createElement("div",null,a.createElement("span",null,a.createElement("a",{href:e.link,className:"author-banner-name",title:e.name},a.createElement("span",null,e.name))),o.PageStore.get("config-media-item").displayPublishDate&&e.published?a.createElement("span",{className:"author-banner-date"},W.default.t("Published on")," ",(0,m.publishedOnDate)(new Date(e.published))):null))}function me(e){return a.createElement("div",{className:e.id.trim()?"media-content-"+e.id.trim():null},a.createElement("div",{className:"media-content-field"},a.createElement("div",{className:"media-content-field-label"},a.createElement("h4",null,e.title)),a.createElement("div",{className:"media-content-field-content"},e.value)))}function fe(e){var t=e.link;return window.MediaCMS.site.devEnv&&(t="/edit-media.html"),a.createElement("a",{href:t,rel:"nofollow",title:"Edit media",className:"edit-media"},W.default.t("EDIT MEDIA"))}function pe(e){var t=e.link;return window.MediaCMS.site.devEnv&&(t="#"),a.createElement("a",{href:t,rel:"nofollow",title:"Edit subtitle",className:"edit-subtitle"},W.default.t("EDIT SUBTITLE"))}function ye(e){var t=(0,F.useUser)().userCan,n=e.description.trim(),r=!o.PageStore.get("config-enabled").taxonomies.tags||o.PageStore.get("config-enabled").taxonomies.tags.enabled?ce(o.MediaPageStore.get("media-tags")):[],l=o.PageStore.get("config-options").pages.media.categoriesWithTitle?[]:!o.PageStore.get("config-enabled").taxonomies.categories||o.PageStore.get("config-enabled").taxonomies.categories.enabled?ce(o.MediaPageStore.get("media-categories")):[],u=o.MediaPageStore.get("media-summary");u=u?u.trim():"";var s=ue((0,F.usePopup)(),3),c=s[0],d=s[1],p=s[2],y=ue((0,a.useState)(""!==u),2),h=y[0],g=(y[1],ue((0,a.useState)(""==u),2)),v=g[0],b=g[1];function w(e){setTimeout((function(){f.PageActions.addNotification(W.default.t("Media removed. Redirecting..."),"mediaDelete"),setTimeout((function(){window.location.href=i.SiteContext._currentValue.url+"/"+o.MediaPageStore.get("media-data").author_profile.replace(/^\//g,"")}),2e3)}),100),void 0!==e&&le.info("Removed media '"+e+'"')}function S(e){setTimeout((function(){f.PageActions.addNotification(W.default.t("Media removal failed"),"mediaDeleteFail")}),100),void 0!==e&&le.info('Media "'+e+'" removal failed')}(0,a.useEffect)((function(){return o.MediaPageStore.on("media_delete",w),o.MediaPageStore.on("media_delete_fail",S),function(){o.MediaPageStore.removeListener("media_delete",w),o.MediaPageStore.removeListener("media_delete_fail",S)}}),[]);var E=(0,m.formatInnerLink)(e.author.url,i.SiteContext._currentValue.url),P=(0,m.formatInnerLink)(e.author.thumb,i.SiteContext._currentValue.url);return a.createElement("div",{className:"media-info-content"},void 0===o.PageStore.get("config-media-item").displayAuthor||null===o.PageStore.get("config-media-item").displayAuthor||o.PageStore.get("config-media-item").displayAuthor?a.createElement(de,{link:E,thumb:P,name:e.author.name,published:e.published}):null,a.createElement("div",{className:"media-content-banner"},a.createElement("div",{className:"media-content-banner-inner"},h?a.createElement("div",{className:"media-content-summary"},u):null,h&&!v||!n?null:o.PageStore.get("config-options").pages.media.htmlInDescription?a.createElement("div",{className:"media-content-description",dangerouslySetInnerHTML:{__html:n}}):a.createElement("div",{className:"media-content-description"},n),h?a.createElement("button",{className:"load-more",onClick:function(){b(!v)}},W.default.t(v?"SHOW LESS":"SHOW MORE")):null,r.length?a.createElement(me,{value:r,title:W.default.t(1<r.length?"Tags":"Tag"),id:"tags"}):null,l.length?a.createElement(me,{value:l,title:W.default.t(1<l.length?"Categories":"Category"),id:"categories"}):null,t.editMedia||t.editSubtitle||t.deleteMedia?a.createElement("div",{className:"media-author-actions"},t.editMedia?a.createElement(fe,{link:o.MediaPageStore.get("media-data").edit_url}):null,t.editSubtitle&&"video"===o.MediaPageStore.get("media-data").media_type?a.createElement(pe,{link:o.MediaPageStore.get("media-data").edit_url.replace("edit?","add_subtitle?")}):null,a.createElement(p,{contentRef:c},a.createElement("button",{className:"remove-media"},W.default.t("DELETE MEDIA"))),a.createElement(d,{contentRef:c},a.createElement(z.PopupMain,null,a.createElement("div",{className:"popup-message"},a.createElement("span",{className:"popup-message-title"},W.default.t("Media removal")),a.createElement("span",{className:"popup-message-main"},W.default.t("You're willing to remove media permanently?"))),a.createElement("hr",null),a.createElement("span",{className:"popup-message-bottom"},a.createElement("button",{className:"button-link cancel-comment-removal",onClick:function(){c.current.toggle()}},W.default.t("CANCEL")),a.createElement("button",{className:"button-link proceed-comment-removal",onClick:function(){f.MediaPageActions.removeMedia(),c.current.toggle()}},W.default.t("PROCEED")))))):null)),a.createElement(oe,null))}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(){var e=he((0,a.useState)(o.MediaPageStore.get("user-disliked-media")),2),t=e[0],n=e[1],r=he((0,a.useState)((0,m.formatViewsNumber)(o.MediaPageStore.get("media-dislikes"),!1)),2),l=r[0],u=r[1];function s(){n(o.MediaPageStore.get("user-disliked-media")),u((0,m.formatViewsNumber)(o.MediaPageStore.get("media-dislikes"),!1))}function c(){s(),f.PageActions.addNotification(i.TextsContext._currentValue.messages.addToDisliked,"mediaDislike")}function d(){s(),f.PageActions.addNotification(i.TextsContext._currentValue.messages.removeFromDisliked,"cancelMediaDislike")}function p(){f.PageActions.addNotification("Action failed","mediaDislikeRequestFail")}return(0,a.useEffect)((function(){return o.MediaPageStore.on("disliked_media",c),o.MediaPageStore.on("undisliked_media",d),o.MediaPageStore.on("disliked_media_failed_request",p),function(){o.MediaPageStore.removeListener("disliked_media",c),o.MediaPageStore.removeListener("undisliked_media",d),o.MediaPageStore.removeListener("disliked_media_failed_request",p)}}),[]),a.createElement("div",{className:"like"},a.createElement("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),f.MediaPageActions[t?"undislikeMedia":"dislikeMedia"]()}},a.createElement(z.CircleIconButton,{type:"span"},a.createElement(z.MaterialIcon,{type:"thumb_down"})),a.createElement("span",{className:"dislikes-counter"},l)))}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(){var e=be((0,a.useState)(o.MediaPageStore.get("user-liked-media")),2),t=e[0],n=e[1],r=be((0,a.useState)((0,m.formatViewsNumber)(o.MediaPageStore.get("media-likes"),!1)),2),l=r[0],u=r[1];function s(){n(o.MediaPageStore.get("user-liked-media")),u((0,m.formatViewsNumber)(o.MediaPageStore.get("media-likes"),!1))}function c(){s(),f.PageActions.addNotification(i.TextsContext._currentValue.addToLiked,"likedMedia")}function d(){s(),f.PageActions.addNotification(i.TextsContext._currentValue.removeFromLiked,"unlikedMedia")}function p(){f.PageActions.addNotification("Action failed","likedMediaRequestFail")}return(0,a.useEffect)((function(){return o.MediaPageStore.on("liked_media",c),o.MediaPageStore.on("unliked_media",d),o.MediaPageStore.on("liked_media_failed_request",p),function(){o.MediaPageStore.removeListener("liked_media",c),o.MediaPageStore.removeListener("unliked_media",d),o.MediaPageStore.removeListener("liked_media_failed_request",p)}}),[]),a.createElement("div",{className:"like"},a.createElement("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),f.MediaPageActions[t?"unlikeMedia":"likeMedia"]()}},a.createElement(z.CircleIconButton,{type:"span"},a.createElement(z.MaterialIcon,{type:"thumb_up"})),a.createElement("span",{className:"likes-counter"},l)))}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e){var t,n,r=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(t=(0,a.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1];function c(){s(window.innerHeight-(104+r.current.offsetHeight))}return(0,a.useEffect)((function(){return c(),o.PageStore.on("window_resize",c),function(){o.PageStore.removeListener("window_resize",c)}}),[]),a.createElement("form",null,a.createElement("div",{className:"report-form",style:null!==u?{maxHeight:u+"px"}:null},a.createElement("div",{className:"form-title"},W.default.t("Report media")),a.createElement("div",{className:"form-field"},a.createElement("span",{className:"label"},W.default.t("URL")),a.createElement("input",{type:"text",readOnly:!0,value:e.mediaUrl})),a.createElement("div",{className:"form-field"},a.createElement("span",{className:"label"},W.default.t("Description")),a.createElement("textarea",{ref:i,required:!0})),a.createElement("div",{className:"form-field form-help-text"},W.default.t("Reported media is reviewed"))),a.createElement("div",{ref:r,className:"form-actions-bottom"},a.createElement("button",{className:"cancel",onClick:function(t){t.preventDefault(),void 0!==e.cancelReportForm&&e.cancelReportForm()}},W.default.t("CANCEL")),a.createElement("button",{onClick:function(t){var n=i.current.value.trim();""!==n&&(t.preventDefault(),void 0!==e.submitReportForm&&e.submitReportForm(n))}},W.default.t("SUBMIT"))))}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){var n,r,a=i.SiteContext._currentValue,o=e.encodings_info,l={};for(n in o)if(o.hasOwnProperty(n)&&Object.keys(o[n]).length)for(r in o[n])o[n].hasOwnProperty(r)&&"success"===o[n][r].status&&100===o[n][r].progress&&null!==o[n][r].url&&(l[o[n][r].title]={text:n+" - "+r.toUpperCase()+" ("+o[n][r].size+")",link:(0,m.formatInnerLink)(o[n][r].url,a.url),linkAttr:{target:"_blank",download:e.title+"_"+n+"_"+r.toUpperCase()}});return l.original_media_url={text:"Original file ("+e.size+")",link:(0,m.formatInnerLink)(e.original_media_url,a.url),linkAttr:{target:"_blank",download:e.title}},Object.values(l)}function Ae(e,t,n,r,i,o,l){var u=t.url,s=t.media_type,c=t.state||"N/A",d=t.encoding_status||"N/A",m=t.reported_times,f=t.is_reviewed,p="video"===s,y=function(e,t,n,r,a){var i=[],o="video"===t.media_type,l=t.reported_times;return n&&e.downloadMedia&&(o?i.push({itemType:"open-subpage",text:"Download",icon:"arrow_downward",itemAttr:{className:"visible-only-in-small"},buttonAttr:{className:"change-page","data-page-id":"videoDownloadOptions"}}):r&&i.push({itemType:"link",link:r,text:"Download",icon:"arrow_downward",itemAttr:{className:"visible-only-in-small"},linkAttr:{target:"_blank",download:t.title}})),o&&e.editMedia&&i.push({itemType:"open-subpage",text:"Status info",icon:"info",buttonAttr:{className:"change-page","data-page-id":"mediaStatusInfo"}}),e.reportMedia&&(a?i.push({itemType:"div",text:"Reported",icon:"flag",divAttr:{className:"reported-label loggedin-media-reported"}}):i.push({itemType:"open-subpage",text:"Report",icon:"flag",buttonAttr:{className:"change-page"+(l?" loggedin-media-reported":""),"data-page-id":"loggedInReportMedia"}})),i}(e,t,n,r,i),h={};return y.length&&(h.main=a.createElement("div",{className:"main-options"},a.createElement(z.PopupMain,null,a.createElement(z.NavigationMenuList,{items:y})))),e.reportMedia&&(h.loggedInReportMedia=i?null:a.createElement("div",{className:"popup-fullscreen"},a.createElement(z.PopupMain,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement("div",null,a.createElement(Pe,{mediaUrl:u,submitReportForm:o,cancelReportForm:l}))))),e.editMedia&&(h.mediaStatusInfo=a.createElement("div",{className:"main-options"},a.createElement(z.PopupMain,null,a.createElement("ul",{className:"media-status-info"},a.createElement("li",null,W.default.t("Media type"),": ",a.createElement("span",null,s)),a.createElement("li",null,W.default.t("State"),": ",a.createElement("span",null,c)),a.createElement("li",null,W.default.t("Review state"),": ",a.createElement("span",null,f?"Is reviewed":"Pending review")),p?a.createElement("li",null,W.default.t("Encoding Status"),": ",a.createElement("span",null,d)):null,m?a.createElement("li",{className:"reports"},W.default.t("Reports"),": ",a.createElement("span",null,m)):null)))),n&&e.downloadMedia&&p&&(h.videoDownloadOptions=a.createElement("div",{className:"video-download-options"},a.createElement(z.PopupMain,null,a.createElement(z.NavigationMenuList,{items:Me(t)})))),h}n(9628),Pe.propTypes={mediaUrl:s().string.isRequired,cancelReportForm:s().func,submitReportForm:s().func};var Ce="more-options active-options";function xe(e){var t=(0,F.useUser)().userCan,n=i.SiteContext._currentValue,r=(0,m.formatInnerLink)(o.MediaPageStore.get("media-original-url"),n.url),l=o.MediaPageStore.get("media-data"),u="video"===l.media_type,s=ke((0,F.usePopup)(),3),c=s[0],d=s[1],p=s[2],y=ke((0,a.useState)(!1),2),h=y[0],g=y[1],v=ke((0,a.useState)(!1),2),b=v[0],w=v[1],S=ke((0,a.useState)({}),2),E=S[0],P=S[1],k=ke((0,a.useState)("main"),2),_=k[0],M=k[1],A=ke((0,a.useState)(Ce),2),C=A[0],x=A[1];function N(e){f.MediaPageActions.reportMedia(e)}function O(){c.current.toggle()}function I(){c.current.tryToHide(),setTimeout((function(){f.PageActions.addNotification("Media Reported","reportedMedia"),w(!0),o.MediaPageStore.removeListener("reported_media",I)}),100)}return(0,a.useEffect)((function(){b||(h?o.MediaPageStore.on("reported_media",I):o.MediaPageStore.removeListener("reported_media",I))}),[h]),(0,a.useEffect)((function(){g(Object.keys(E).length&&e.allowDownload&&t.downloadMedia)}),[E]),(0,a.useEffect)((function(){var n=Ce;e.allowDownload&&t.downloadMedia&&"videoDownloadOptions"===_&&(n+=" video-downloads"),1===Object.keys(E).length&&e.allowDownload&&t.downloadMedia&&(u||r)&&(n+=" visible-only-in-small"),x(n)}),[_]),(0,a.useEffect)((function(){P(Ae(t,l,e.allowDownload,r,b,N,O))}),[b]),(0,a.useEffect)((function(){return P(Ae(t,l,e.allowDownload,r,b,N,O)),function(){h&&!b&&o.MediaPageStore.removeListener("reported_media",I)}}),[]),h?a.createElement("div",{className:C},a.createElement(p,{contentRef:c},a.createElement("span",null,a.createElement(z.CircleIconButton,{type:"button"},a.createElement(z.MaterialIcon,{type:"more_horiz"})))),a.createElement("div",{className:"nav-page-"+_},a.createElement(d,{contentRef:c,hideCallback:function(){M("main")}},a.createElement(z.NavigationContentApp,{pageChangeCallback:function(e){M(e)},initPage:_,focusFirstItemOnPageChange:!1,pages:E,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"})))):null}xe.propTypes={allowDownload:s().bool.isRequired},xe.defaultProps={allowDownload:!1};var Ne=n(7642);function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e){return e.renderDate?a.createElement("label",null,a.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:function(t){t.persist(),e.isChecked?f.MediaPageActions.removeMediaFromPlaylist(e.playlistId,o.MediaPageStore.get("media-id")):f.MediaPageActions.addMediaToPlaylist(e.playlistId,o.MediaPageStore.get("media-id"))}}),a.createElement("span",null,e.title)):null}function je(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),r=Oe((0,a.useState)(new Date),2),i=r[0],l=r[1],u=Oe((0,a.useState)(o.MediaPageStore.get("playlists")),2),s=u[0],c=u[1],d=Oe((0,a.useState)(!1),2),m=d[0],p=d[1];function y(){S()}function h(){c(o.MediaPageStore.get("playlists")),l(new Date)}function g(){c(o.MediaPageStore.get("playlists")),l(new Date),setTimeout((function(){f.PageActions.addNotification("Media added to playlist","playlistMediaAdditionComplete")}),100)}function v(){setTimeout((function(){f.PageActions.addNotification("Media's addition to playlist failed","playlistMediaAdditionFail")}),100)}function b(){c(o.MediaPageStore.get("playlists")),l(new Date),setTimeout((function(){f.PageActions.addNotification("Media removed from playlist","playlistMediaRemovalComplete")}),100)}function w(){setTimeout((function(){f.PageActions.addNotification("Media's removal from playlist failed","playlistMediaaRemovalFail")}),100)}function S(){null!==n.current&&(n.current.style.maxHeight=window.innerHeight-74-(t.current.offsetHeight-n.current.offsetHeight)+"px")}function E(){p(!m),S()}return(0,a.useEffect)((function(){S()})),(0,a.useEffect)((function(){return o.PageStore.on("window_resize",y),o.MediaPageStore.on("playlists_load",h),o.MediaPageStore.on("media_playlist_addition_completed",g),o.MediaPageStore.on("media_playlist_addition_failed",v),o.MediaPageStore.on("media_playlist_removal_completed",b),o.MediaPageStore.on("media_playlist_removal_failed",w),function(){o.PageStore.removeListener("window_resize",y),o.MediaPageStore.removeListener("playlists_load",h),o.MediaPageStore.removeListener("media_playlist_addition_completed",g),o.MediaPageStore.removeListener("media_playlist_addition_failed",v),o.MediaPageStore.removeListener("media_playlist_removal_completed",b),o.MediaPageStore.removeListener("media_playlist_removal_failed",w)}}),[]),a.createElement("div",{ref:t,className:"saveto-popup"},a.createElement("div",{className:"saveto-title"},W.default.t("Save to..."),a.createElement(z.CircleIconButton,{type:"button",onClick:function(){p(!1),void 0!==e.triggerPopupClose&&e.triggerPopupClose()}},a.createElement(z.MaterialIcon,{type:"close"}))),s.length?a.createElement("div",{ref:n,className:"saveto-select"},function(){for(var e=o.MediaPageStore.get("media-id"),t=[],n=0;n<s.length;)t.push(a.createElement("div",{key:"playlist_"+s[n].playlist_id},a.createElement(Te,{renderDate:i,title:s[n].title,privacy:s[n].status,isChecked:-1<s[n].media_list.indexOf(e),playlistId:s[n].playlist_id}))),n+=1;return t}()):null,m?a.createElement("div",{className:"saveto-new-playlist"},a.createElement(Ne.A,{onCancel:E,onPlaylistSave:function(e){f.MediaPageActions.addNewPlaylist(e),E()}})):a.createElement(z.CircleIconButton,{className:"saveto-create",type:"button",onClick:E},a.createElement(z.MaterialIcon,{type:"add"}),W.default.t("Create a new playlist")))}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e){var t,n=Re((0,F.usePopup)(),3),r=n[0],i=n[1],o=n[2],l=Re((0,a.useState)("selectPlaylist"),2),u=l[0],s=l[1];return a.createElement("div",{className:"save"},a.createElement(o,{contentRef:r},a.createElement("button",null,a.createElement(z.CircleIconButton,{type:"span"},a.createElement(z.MaterialIcon,{type:"playlist_add"})),a.createElement("span",null,W.default.t("SAVE")))),a.createElement(i,{contentRef:r},a.createElement(z.NavigationContentApp,{initPage:u,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id",pages:(t=function(){r.current.toggle()},{selectPlaylist:a.createElement("div",{className:"popup-fullscreen"},a.createElement(z.PopupMain,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement(je,{triggerPopupClose:t}))),createPlaylist:a.createElement("div",{className:"popup-fullscreen"},a.createElement(z.PopupMain,null,a.createElement("span",{className:"popup-fullscreen-overlay"})))}),focusFirstItemOnPageChange:!1,pageChangeCallback:s})))}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e){var t=o.PageStore.get("config-options").embedded.video.dimensions,n=(0,a.useContext)(i.LinksContext),r=(0,a.useRef)(null),l=(0,a.useRef)(null),u=(0,a.useRef)(null),s=(0,a.useRef)(null),c=(0,a.useRef)(null),d=De((0,a.useState)(window.innerHeight-144+56),2),m=d[0],p=d[1],y=De((0,a.useState)(!1),2),h=y[0],g=y[1],v=De((0,a.useState)("16:9"),2),b=v[0],w=v[1],S=De((0,a.useState)(t.width),2),E=S[0],P=S[1],k=De((0,a.useState)(t.widthUnit),2),_=k[0],M=k[1],A=De((0,a.useState)(t.height),2),C=A[0],x=A[1],N=De((0,a.useState)(t.heightUnit),2),O=N[0],I=N[1],T=De((0,a.useState)(60),2),j=T[0],R=T[1],L=De((0,a.useState)(60),2),D=L[0],U=L[1],B=De((0,a.useState)([{key:"px",label:"px"},{key:"percent",label:"%"}]),2),F=B[0],H=B[1];function q(){p(window.innerHeight-144+56),R(u.current.offsetHeight),U(c.current.offsetHeight)}function $(){setTimeout((function(){f.PageActions.addNotification("Embed media code copied to clipboard","clipboardEmbedMediaCodeCopy")}),100)}return(0,a.useEffect)((function(){p(window.innerHeight-144+56),R(u.current.offsetHeight),U(c.current.offsetHeight)})),(0,a.useEffect)((function(){return o.PageStore.on("window_resize",q),o.MediaPageStore.on("copied_embed_media_code",$),function(){o.PageStore.removeListener("window_resize",q),o.MediaPageStore.removeListener("copied_embed_media_code",$)}}),[]),a.createElement("div",{className:"share-embed",style:{maxHeight:m+"px"}},a.createElement("div",{className:"share-embed-inner"},a.createElement("div",{className:"on-left"},a.createElement("div",{className:"media-embed-wrap"},a.createElement(V,{data:o.MediaPageStore.get("media-data"),inEmbed:!0}))),a.createElement("div",{ref:l,className:"on-right"},a.createElement("div",{ref:u,className:"on-right-top"},a.createElement("div",{className:"on-right-top-inner"},a.createElement("span",{className:"ttl"},W.default.t("Embed Video")),a.createElement(z.CircleIconButton,{type:"button",onClick:function(){void 0!==e.triggerPopupClose&&e.triggerPopupClose()}},a.createElement(z.MaterialIcon,{type:"close"})))),a.createElement("div",{ref:s,className:"on-right-middle",style:{top:j+"px",bottom:D+"px"}},a.createElement("textarea",{readOnly:!0,value:'<iframe width="'+("percent"===_?E+"%":E)+'" height="'+("percent"===O?C+"%":C)+'" src="'+n.embed+o.MediaPageStore.get("media-id")+'" frameborder="0" allowfullscreen></iframe>'}),a.createElement("div",{className:"iframe-config"},a.createElement("div",{className:"iframe-config-options-title"},W.default.t("Embed options")),a.createElement("div",{className:"iframe-config-option"},a.createElement("div",{className:"option-content"},a.createElement("div",{className:"ratio-options"},a.createElement("div",{className:"options-group"},a.createElement("label",{style:{minHeight:"36px"}},a.createElement("input",{type:"checkbox",checked:h,onChange:function(){var e=!h,t=b.split(":"),n=t[0],r=t[1];g(e),M(e?"px":_),I(e?"px":O),x(e?parseInt(E*r/n,10):C),H(e?[{key:"px",label:"px"}]:[{key:"px",label:"px"},{key:"percent",label:"%"}])}}),W.default.t("Keep aspect ratio"))),h?a.createElement("div",{className:"options-group"},a.createElement("select",{ref:r,onChange:function(){var e=r.current.value,t=e.split(":"),n=t[0],a=t[1];w(e),x(h?parseInt(E*a/n,10):C)},value:b},a.createElement("optgroup",{label:"Horizontal orientation"},a.createElement("option",{value:"16:9"},"16:9"),a.createElement("option",{value:"4:3"},"4:3"),a.createElement("option",{value:"3:2"},"3:2")),a.createElement("optgroup",{label:"Vertical orientation"},a.createElement("option",{value:"9:16"},"9:16"),a.createElement("option",{value:"3:4"},"3:4"),a.createElement("option",{value:"2:3"},"2:3")))):null),a.createElement("br",null),a.createElement("div",{className:"options-group"},a.createElement(z.NumericInputWithUnit,{valueCallback:function(e){e=""===e?0:e;var t=b.split(":"),n=t[0],r=t[1];P(e),x(h?parseInt(e*r/n,10):C)},unitCallback:function(e){M(e)},label:W.default.t("Width"),defaultValue:parseInt(E,10),defaultUnit:_,minValue:1,maxValue:99999,units:F})),a.createElement("div",{className:"options-group"},a.createElement(z.NumericInputWithUnit,{valueCallback:function(e){e=""===e?0:e;var t=b.split(":"),n=t[0],r=t[1];x(e),P(h?parseInt(e*n/r,10):E)},unitCallback:function(e){I(e)},label:W.default.t("Height"),defaultValue:parseInt(C,10),defaultUnit:O,minValue:1,maxValue:99999,units:F})))))),a.createElement("div",{ref:c,className:"on-right-bottom"},a.createElement("button",{onClick:function(){f.MediaPageActions.copyEmbedMediaCode(s.current.querySelector("textarea"))}},W.default.t("COPY"))))))}Te.propTypes={playlistId:s().string,isChecked:s().bool,title:s().string},Te.defaultProps={isChecked:!1,title:""},je.propTypes={triggerPopupClose:s().func},n(8833),n(815),n(9174),Be.propTypes={triggerPopupClose:s().func},n(5777);var Fe=n(3458);function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e){var t=e.onClick;return a.createElement("span",{className:"next-slide"},a.createElement(z.CircleIconButton,{buttonShadow:!0,onClick:t},a.createElement("i",{className:"material-icons"},"keyboard_arrow_right")))}function We(e){var t=e.onClick;return a.createElement("span",{className:"previous-slide"},a.createElement(z.CircleIconButton,{buttonShadow:!0,onClick:t},a.createElement("i",{className:"material-icons"},"keyboard_arrow_left")))}function $e(){return{maxFormContentHeight:window.innerHeight-196,maxPopupWidth:518>window.innerWidth-80?window.innerWidth-80:null}}function Ze(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),r=o.MediaPageStore.get("media-url"),l=ze((0,a.useState)(null),2),u=l[0],s=l[1],c=ze((0,a.useState)({prev:!1,next:!1}),2),d=c[0],m=c[1],p=ze((0,a.useState)($e()),2),y=p[0],h=p[1],g=ze((0,a.useState)(function(){var e=function(){for(var e=i.ShareOptionsContext._currentValue,t=o.MediaPageStore.get("media-url"),n=o.MediaPageStore.get("media-data").title,r={},a=0;a<e.length;){switch(e[a]){case"embed":"video"===o.MediaPageStore.get("media-data").media_type&&(r[e[a]]={});break;case"email":r[e[a]]={title:"Email",shareUrl:"mailto:?body="+t};break;case"fb":r[e[a]]={title:"Facebook",shareUrl:"https://www.facebook.com/sharer.php?u="+t};break;case"tw":r[e[a]]={title:"Twitter",shareUrl:"https://twitter.com/intent/tweet?url="+t};break;case"reddit":r[e[a]]={title:"reddit",shareUrl:"https://reddit.com/submit?url="+t+"&title="+n};break;case"tumblr":r[e[a]]={title:"Tumblr",shareUrl:"https://www.tumblr.com/widgets/share/tool?canonicalUrl="+t+"&title="+n};break;case"pinterest":r[e[a]]={title:"Pinterest",shareUrl:"http://pinterest.com/pin/create/link/?url="+t};break;case"vk":r[e[a]]={title:"ВКонтакте",shareUrl:"http://vk.com/share.php?url="+t+"&title="+n};break;case"linkedin":r[e[a]]={title:"LinkedIn",shareUrl:"https://www.linkedin.com/shareArticle?mini=true&url="+t};break;case"mix":r[e[a]]={title:"Mix",shareUrl:"https://mix.com/add?url="+t};break;case"whatsapp":r[e[a]]={title:"WhatsApp",shareUrl:"whatsapp://send?text="+t};break;case"telegram":r[e[a]]={title:"Telegram",shareUrl:"https://t.me/share/url?url="+t+"&text="+n}}a+=1}return r}(),t=[];for(var n in e)e.hasOwnProperty(n)&&("embed"===n?t.push(a.createElement("div",{key:"share-"+n,className:"sh-option share-"+n+"-opt"},a.createElement("button",{className:"sh-option change-page","data-page-id":"shareEmbed"},a.createElement("span",null,a.createElement("i",{className:"material-icons"},"code")),a.createElement("span",null,W.default.t("Embed"))))):"whatsapp"===n?t.push(a.createElement("div",{key:"share-"+n,className:"sh-option share-"+n},a.createElement("a",{href:e[n].shareUrl,title:"",target:"_blank","data-action":"share/whatsapp/share",rel:"noreferrer"},a.createElement("span",null),a.createElement("span",null,W.default.t(e[n].title))))):"email"===n?t.push(a.createElement("div",{key:"share-email",className:"sh-option share-email"},a.createElement("a",{href:e[n].shareUrl,title:""},a.createElement("span",null,a.createElement("i",{className:"material-icons"},W.default.t("email"))),a.createElement("span",null,W.default.t(e[n].title))))):t.push(a.createElement("div",{key:"share-"+n,className:"sh-option share-"+n},a.createElement("a",{href:e[n].shareUrl,title:"",target:"_blank",rel:"noreferrer"},a.createElement("span",null),a.createElement("span",null,W.default.t(e[n].title))))));return t}()),1)[0],v=ze((0,a.useState)(0),2),b=v[0],w=v[1],S=ze((0,a.useState)(0),2),E=S[0],P=S[1],k=ze((0,a.useState)(!1),2),_=k[0],M=k[1],A=ze((0,a.useState)(r),2),C=A[0],x=A[1];function N(){h($e())}function O(){setTimeout((function(){f.PageActions.addNotification("Link copied to clipboard","clipboardLinkCopy")}),100)}function I(){u.scrollToCurrentSlide(),m({prev:u.hasPreviousSlide(),next:u.hasNextSlide()})}return(0,a.useEffect)((function(){s(new Fe.Z(n.current,".sh-option"))}),[g]),(0,a.useEffect)((function(){u&&(u.updateDataStateOnResize(g.length,!0,!0),I())}),[y,u]),(0,a.useEffect)((function(){o.PageStore.on("window_resize",N),o.MediaPageStore.on("copied_media_link",O);var e,t,n,r,a,i=null===(e=document.getElementsByTagName("video")[0])||void 0===e?void 0:e.currentTime;return w(i),P((a=(t=parseInt(i,10))-3600*(n=Math.floor(t/3600))-60*(r=Math.floor((t-3600*n)/60)),n<10&&(n="0"+n),r<10&&(r="0"+r),a<10&&(a="0"+a),n>=1?n+":"+r+":"+a:r+":"+a)),function(){o.PageStore.removeListener("window_resize",N),o.MediaPageStore.removeListener("copied_media_link",O),s(null)}}),[]),a.createElement("div",{ref:t,style:null!==y.maxPopupWidth?{maxWidth:y.maxPopupWidth+"px"}:null},a.createElement("div",{className:"scrollable-content",style:null!==y.maxFormContentHeight?{maxHeight:y.maxFormContentHeight+"px"}:null},a.createElement("div",{className:"share-popup-title"},W.default.t("Share media")),g.length?a.createElement("div",{className:"share-options"},d.prev?a.createElement(We,{onClick:function(){u.previousSlide(),I()}}):null,a.createElement("div",{ref:n,className:"share-options-inner"},g),d.next?a.createElement(qe,{onClick:function(){u.nextSlide(),I()}}):null):null),a.createElement("div",{className:"copy-field"},a.createElement("div",null,a.createElement("input",{type:"text",readOnly:!0,value:C}),a.createElement("button",{onClick:function(){f.MediaPageActions.copyShareLink(t.current.querySelector(".copy-field input"))}},W.default.t("COPY")))),a.createElement("div",{className:"start-at"},a.createElement("label",null,a.createElement("input",{type:"checkbox",name:"start-at-checkbox",id:"id-start-at-checkbox",checked:_,onChange:function(){var e;M(!_),e=_?r:r+"&t="+Math.trunc(b),x(e)}}),W.default.t("Start at",{time:E}))))}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(){return{shareOptions:a.createElement("div",{className:"popup-fullscreen"},a.createElement(z.PopupMain,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement(Ze,null)))}}function et(e){var t,n=Ye((0,F.usePopup)(),3),r=n[0],i=n[1],o=n[2],l=Ye((0,a.useState)("shareOptions"),2),u=l[0],s=l[1];return a.createElement("div",{className:"share"},a.createElement(o,{contentRef:r},a.createElement("button",null,a.createElement(z.CircleIconButton,{type:"span"},a.createElement(z.MaterialIcon,{type:"share"})),a.createElement("span",null,W.default.t("SHARE")))),a.createElement(i,{contentRef:r,hideCallback:function(){s("shareOptions")}},a.createElement(z.NavigationContentApp,{initPage:u,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id",pages:e.isVideo?(t=function(){r.current.toggle()},Ke(Ke({},Xe()),{},{shareEmbed:a.createElement("div",{className:"popup-fullscreen share-embed-popup"},a.createElement(z.PopupMain,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement(Be,{triggerPopupClose:t})))})):Xe(),focusFirstItemOnPageChange:!1,pageChangeCallback:function(e){s(e)}})))}function tt(e){return a.createElement("div",{className:"download hidden-only-in-small"},a.createElement("a",{href:e.link,target:"_blank",download:e.title,title:"Download",rel:"noreferrer"},a.createElement(z.CircleIconButton,{type:"span"},a.createElement(z.MaterialIcon,{type:"arrow_downward"})),a.createElement("span",null,"DOWNLOAD")))}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(){var e,t,n=o.MediaPageStore.get("media-data"),r=(n.title,n.encodings_info),a={};for(e in r)if(r.hasOwnProperty(e)&&Object.keys(r[e]).length)for(t in r[e])r[e].hasOwnProperty(t)&&"success"===r[e][t].status&&100===r[e][t].progress&&null!==r[e][t].url&&(a[r[e][t].title]={text:e+" - "+t.toUpperCase()+" ("+r[e][t].size+")",link:(0,m.formatInnerLink)(r[e][t].url,i.SiteContext._currentValue.url),linkAttr:{target:"_blank",download:n.title+"_"+e+"_"+t.toUpperCase()}});return a.original_media_url={text:W.default.t("Original file",{size:n.size}),link:(0,m.formatInnerLink)(n.original_media_url,i.SiteContext._currentValue.url),linkAttr:{target:"_blank",download:n.title}},Object.values(a)}function it(e){var t=nt((0,F.usePopup)(),3),n=t[0],r=t[1],i=t[2],o=nt((0,a.useState)("main"),2),l=o[0];return o[1],a.createElement("div",{className:"video-downloads hidden-only-in-small"},a.createElement(i,{contentRef:n},a.createElement("button",null,a.createElement(z.CircleIconButton,{type:"span"},a.createElement(z.MaterialIcon,{type:"arrow_downward"})),a.createElement("span",null,W.default.t("DOWNLOAD")))),a.createElement("div",{className:"nav-page-"+l},a.createElement(r,{contentRef:n},a.createElement(z.NavigationContentApp,{pageChangeCallback:null,initPage:"main",focusFirstItemOnPageChange:!1,pages:{main:a.createElement("div",{className:"main-options"},a.createElement(z.PopupMain,null,a.createElement(z.NavigationMenuList,{items:at()})))},pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"}))))}function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}tt.propTypes={link:s().string.isRequired,title:s().string.isRequired};var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(s,e);var t,n,r,l,u=(r=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(r);if(l){var n=dt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return st(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).state={likedMedia:o.MediaPageStore.get("user-liked-media"),dislikedMedia:o.MediaPageStore.get("user-disliked-media")},t.downloadLink="video"!==o.MediaPageStore.get("media-type")?(0,m.formatInnerLink)(o.MediaPageStore.get("media-original-url"),i.SiteContext._currentValue.url):null,t.updateStateValues=t.updateStateValues.bind(ct(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){o.MediaPageStore.on("liked_media",this.updateStateValues),o.MediaPageStore.on("unliked_media",this.updateStateValues),o.MediaPageStore.on("disliked_media",this.updateStateValues),o.MediaPageStore.on("undisliked_media",this.updateStateValues);var e=document.querySelectorAll("[data-tooltip]");e.length&&e.forEach((function(e){return function(e){var t=document.body,n=document.createElement("span");function r(){var t=e.getBoundingClientRect();n.style.top=t.top-(0+n.offsetHeight)+"px",n.style.left=t.left+"px"}n.innerText=e.getAttribute("data-tooltip"),n.setAttribute("class","tooltip"),e.removeAttribute("data-tooltip"),e.addEventListener("mouseenter",(function(){var a=e.getBoundingClientRect();t.appendChild(n),n.style.top=a.top-(0+n.offsetHeight)+"px",n.style.left=a.left+"px",document.addEventListener("scroll",r)})),e.addEventListener("mouseleave",(function(){t.removeChild(n),n.style.top="",n.style.left="",document.removeEventListener("scroll",r)}))}(e)}))}},{key:"updateStateValues",value:function(){this.setState({likedMedia:o.MediaPageStore.get("user-liked-media"),dislikedMedia:o.MediaPageStore.get("user-disliked-media")})}},{key:"mediaCategories",value:function(e){if(void 0===this.props.categories||null===this.props.categories||!this.props.categories.length)return null;for(var t=0,n=[];t<this.props.categories.length;)n.push(a.createElement("span",{key:t},a.createElement("a",{href:(0,m.formatInnerLink)(this.props.categories[t].url,i.SiteContext._currentValue.url),title:this.props.categories[t].title},this.props.categories[t].title))),t+=1;return a.createElement("div",{className:"media-under-title-categories"+(e?" over-title":"")},n)}},{key:"render",value:function(){var e=o.PageStore.get("config-options").pages.media.displayViews&&void 0!==this.props.views,t=o.MediaPageStore.get("media-data").state,n="";switch(t){case"private":n="The site admins have to make its access public";break;case"unlisted":n="The site admins have to make it appear on listings"}return a.createElement("div",{className:"media-title-banner"},e&&o.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories(!0):null,void 0!==this.props.title?a.createElement("h1",null,this.props.title):null,"public"!==t?a.createElement("div",{className:"media-labels-area"},a.createElement("div",{className:"media-labels-area-inner"},a.createElement("span",{className:"media-label-state"},a.createElement("span",null,t)),a.createElement("span",{className:"helper-icon","data-tooltip":n},a.createElement("i",{className:"material-icons"},"help_outline")))):null,a.createElement("div",{className:"media-views-actions"+(this.state.likedMedia?" liked-media":"")+(this.state.dislikedMedia?" disliked-media":"")},!e&&o.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories():null,e?a.createElement("div",{className:"media-views"},(0,m.formatViewsNumber)(this.props.views,!0)," ",1>=this.props.views?"view":"views"):null,a.createElement("div",{className:"media-actions"},a.createElement("div",null,i.MemberContext._currentValue.can.likeMedia?a.createElement(Se,null):null,i.MemberContext._currentValue.can.dislikeMedia?a.createElement(ve,null):null,i.MemberContext._currentValue.can.shareMedia?a.createElement(et,{isVideo:!1}):null,!i.MemberContext._currentValue.is.anonymous&&i.MemberContext._currentValue.can.saveMedia&&-1<i.PlaylistsContext._currentValue.mediaTypes.indexOf(o.MediaPageStore.get("media-type"))?a.createElement(Ve,null):null,this.props.allowDownload&&i.MemberContext._currentValue.can.downloadMedia?this.downloadLink?a.createElement(tt,{link:this.downloadLink,title:this.props.title}):a.createElement(it,null):null,a.createElement(xe,{allowDownload:this.props.allowDownload})))))}}])&&lt(t.prototype,n),s}(a.PureComponent);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}mt.propTypes={allowDownload:s().bool.isRequired},mt.defaultProps={allowDownload:!1};var bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(s,e);var t,n,r,l,u=(r=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(r);if(l){var n=vt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gt(this,e)});function s(){return pt(this,s),u.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=o.PageStore.get("config-options").pages.media.displayViews&&void 0!==this.props.views,t=o.MediaPageStore.get("media-data").state,n="";switch(t){case"private":n="The site admins have to make its access public";break;case"unlisted":n="The site admins have to make it appear on listings"}return a.createElement("div",{className:"media-title-banner"},e&&o.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories(!0):null,void 0!==this.props.title?a.createElement("h1",null,this.props.title):null,"public"!==t?a.createElement("div",{className:"media-labels-area"},a.createElement("div",{className:"media-labels-area-inner"},a.createElement("span",{className:"media-label-state"},a.createElement("span",null,t)),a.createElement("span",{className:"helper-icon","data-tooltip":n},a.createElement("i",{className:"material-icons"},"help_outline")))):null,a.createElement("div",{className:"media-views-actions"+(this.state.likedMedia?" liked-media":"")+(this.state.dislikedMedia?" disliked-media":"")},!e&&o.PageStore.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories():null,e?a.createElement("div",{className:"media-views"},W.default.t(1>=this.props.views?"view":"views",{count:(0,m.formatViewsNumber)(this.props.views,!0)})):null,a.createElement("div",{className:"media-actions"},a.createElement("div",null,i.MemberContext._currentValue.can.likeMedia?a.createElement(Se,null):null,i.MemberContext._currentValue.can.dislikeMedia?a.createElement(ve,null):null,i.MemberContext._currentValue.can.shareMedia?a.createElement(et,{isVideo:!0}):null,!i.MemberContext._currentValue.is.anonymous&&i.MemberContext._currentValue.can.saveMedia&&-1<i.PlaylistsContext._currentValue.mediaTypes.indexOf(o.MediaPageStore.get("media-type"))?a.createElement(Ve,null):null,this.props.allowDownload&&i.MemberContext._currentValue.can.downloadMedia?this.downloadLink?a.createElement(tt,{link:this.downloadLink,title:this.props.title}):a.createElement(it,null):null,a.createElement(xe,{allowDownload:this.props.allowDownload})))))}}])&&yt(t.prototype,n),s}(mt);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?kt(e):t}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(u,e);var t,n,r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ot(r);if(i){var n=Ot(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Nt(this,e)});function u(){return At(this,u),l.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e,t,n,r,i,l,u=!1;return this.state.videoLoaded&&(u=void 0===(u=o.MediaPageStore.get("media-data").allow_download)||!!u,e=o.MediaPageStore.get("media-data").views,t=o.MediaPageStore.get("media-data").categories_info,n=o.MediaPageStore.get("media-data").title,r={name:o.MediaPageStore.get("media-data").author_name,url:o.MediaPageStore.get("media-data").author_profile,thumb:o.MediaPageStore.get("media-author-thumbnail-url")},i=o.MediaPageStore.get("media-data").add_date,l=o.MediaPageStore.get("media-data").description),this.state.videoLoaded?a.createElement("div",{className:"viewer-info"},a.createElement("div",{className:"viewer-info-inner"},a.createElement(bt,{title:n,views:e,categories:t,allowDownload:u}),a.createElement(ye,{author:r,published:i,description:l}))):null}}])&&Ct(t.prototype,n),u}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(u,e);var t,n,r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(r);if(i){var n=_t(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pt(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={videoLoaded:!1},t.onVideoLoad=t.onVideoLoad.bind(kt(t)),o.MediaPageStore.on("loaded_media_data",t.onVideoLoad),t}return t=u,(n=[{key:"onVideoLoad",value:function(){this.setState({videoLoaded:!0})}},{key:"render",value:function(){var e,t,n,r,i,l,u=!1;return this.state.videoLoaded&&(u=void 0===(u=o.MediaPageStore.get("media-data").allow_download)||!!u,e=o.MediaPageStore.get("media-data").views,t=o.MediaPageStore.get("media-data").categories_info,n=o.MediaPageStore.get("media-data").title,r={name:o.MediaPageStore.get("media-data").author_name,url:o.MediaPageStore.get("media-data").author_profile,thumb:o.MediaPageStore.get("media-author-thumbnail-url")},i=o.MediaPageStore.get("media-data").add_date,l=o.MediaPageStore.get("media-data").description),this.state.videoLoaded?a.createElement("div",{className:"viewer-info"},a.createElement("div",{className:"viewer-info-inner"},a.createElement(mt,{title:n,views:e,categories:t,allowDownload:u}),a.createElement(ye,{author:r,published:i,description:l}))):null}}])&&St(t.prototype,n),u}(a.PureComponent));function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(u,e);var t,n,r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(r);if(i){var n=Dt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Vt(this,e)});function u(){return jt(this,u),l.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return a.createElement("div",{className:"viewer-container",key:"viewer-container-error"},a.createElement("div",{className:"player-container player-container-error"},a.createElement("div",{className:"player-container-inner"},a.createElement("div",{className:"error-container"},a.createElement("div",{className:"error-container-inner"},a.createElement("span",{className:"icon-wrap"},a.createElement("i",{className:"material-icons"},"error_outline")),a.createElement("span",{className:"msg-wrap"},o.MediaPageStore.get("media-load-error-message")))))))}}])&&Rt(t.prototype,n),u}(a.PureComponent),Bt=n(7777);function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(){var e=o.MediaPageStore.get("media-data");return e&&e.related_media&&e.related_media.length?e.related_media[0]:null}function qt(e){var t=Ft((0,a.useState)(Ht()),2),n=t[0],r=t[1],i=Ft((0,a.useState)(o.PageStore.get("media-auto-play")),2),l=i[0],u=i[1];function s(){u(o.PageStore.get("media-auto-play"))}function c(){r(Ht())}return(0,a.useEffect)((function(){return o.MediaPageStore.on("loaded_media_data",c),o.PageStore.on("switched_media_auto_play",s),function(){o.MediaPageStore.removeListener("loaded_media_data",c),o.PageStore.removeListener("switched_media_auto_play",s)}}),[]),n?a.createElement("div",{className:"auto-play"},a.createElement("div",{className:"auto-play-header"},a.createElement("div",{className:"next-label"},W.default.t("Up next")),a.createElement("div",{className:"auto-play-option"},a.createElement("label",{className:"checkbox-label right-selectbox",tabIndex:0,onKeyPress:function(e){0===e.keyCode&&f.PageActions.toggleMediaAutoPlay()}},W.default.t("AUTOPLAY"),a.createElement("span",{className:"checkbox-switcher-wrap"},a.createElement("span",{className:"checkbox-switcher"},a.createElement("input",{type:"checkbox",tabIndex:-1,checked:l,onChange:f.PageActions.toggleMediaAutoPlay})))))),a.createElement(Bt.s,{className:"items-list-hor",items:[n],pageItems:1,maxItems:1,singleLinkContent:!0,horizontalItemsOrientation:!0,hideDate:!0,hideViews:!o.PageStore.get("config-media-item").displayViews,hideAuthor:!o.PageStore.get("config-media-item").displayAuthor})):null}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(e){var t=Wt((0,a.useState)(c()),2),n=t[0],r=t[1],i=Wt((0,a.useState)(null),2),l=i[0],u=i[1];function s(){u(o.MediaPageStore.get("media-type")),r(c())}function c(){var e=o.MediaPageStore.get("media-data");return null!=e&&void 0!==e.related_media&&e.related_media.length?e.related_media:null}return(0,a.useEffect)((function(){return o.MediaPageStore.on("loaded_media_data",s),function(){return o.MediaPageStore.removeListener("loaded_media_data",s)}}),[]),n&&n.length?a.createElement(Bt.s,{className:"items-list-hor",items:!e.hideFirst||"video"!==l&&"audio"!==l?n:n.slice(1),pageItems:o.PageStore.get("config-options").pages.media.related.initialSize,singleLinkContent:!0,horizontalItemsOrientation:!0,hideDate:!0,hideViews:!o.PageStore.get("config-media-item").displayViews,hideAuthor:!o.PageStore.get("config-media-item").displayAuthor}):null}function Yt(e){return a.createElement(Bt.s,{className:"items-list-hor",pageItems:9999,maxItems:9999,items:e.items,hideDate:!0,hideViews:!0,hidePlaylistOrderNumber:!1,horizontalItemsOrientation:!0,inPlaylistView:!0,singleLinkContent:!0,playlistActiveItem:e.playlistActiveItem})}function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?Xt(e):t}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Zt.propTypes={hideFirst:s().bool},Zt.defaultProps={hideFirst:!0},Yt.propTypes={items:s().array.isRequired,playlistActiveItem:m.PositiveIntegerOrZero},Yt.defaultProps={playlistActiveItem:1};var tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(s,e);var t,n,r,l,u=(r=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=en(r);if(l){var n=en(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jt(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).state={expanded:!0,loopRepeat:o.PlaylistViewStore.get("enabled-loop"),shuffle:o.PlaylistViewStore.get("enabled-shuffle"),savedPlaylist:o.PlaylistViewStore.get("saved-playlist-loop"),title:e.playlistData.title,link:e.playlistData.url,authorName:e.playlistData.user,authorLink:i.LinksContext._currentValue.home+"/user/"+e.playlistData.user,activeItem:e.activeItem,totalMedia:e.playlistData.media_count,items:e.playlistData.playlist_media},t.onHeaderClick=t.onHeaderClick.bind(Xt(t)),t.onLoopClick=t.onLoopClick.bind(Xt(t)),t.onShuffleClick=t.onShuffleClick.bind(Xt(t)),t.onSaveClick=t.onSaveClick.bind(Xt(t)),t.onLoopRepeatUpdate=t.onLoopRepeatUpdate.bind(Xt(t)),t.onShuffleUpdate=t.onShuffleUpdate.bind(Xt(t)),t.onPlaylistSaveUpdate=t.onPlaylistSaveUpdate.bind(Xt(t)),o.PlaylistViewStore.on("loop-repeat-updated",t.onLoopRepeatUpdate),o.PlaylistViewStore.on("shuffle-updated",t.onShuffleUpdate),o.PlaylistViewStore.on("saved-updated",t.onPlaylistSaveUpdate),t}return t=s,(n=[{key:"onHeaderClick",value:function(e){this.setState({expanded:!this.state.expanded})}},{key:"onLoopClick",value:function(){f.PlaylistViewActions.toggleLoop()}},{key:"onShuffleClick",value:function(){f.PlaylistViewActions.toggleShuffle()}},{key:"onSaveClick",value:function(){f.PlaylistViewActions.toggleSave()}},{key:"onShuffleUpdate",value:function(){var e=this;this.setState({shuffle:o.PlaylistViewStore.get("enabled-shuffle")},(function(){e.state.shuffle?f.PageActions.addNotification("Playlist shuffle is on","shuffle-on"):f.PageActions.addNotification("Playlist shuffle is off","shuffle-off")}))}},{key:"onLoopRepeatUpdate",value:function(){var e=this;this.setState({loopRepeat:o.PlaylistViewStore.get("enabled-loop")},(function(){e.state.loopRepeat?f.PageActions.addNotification("Playlist loop is on","loop-on"):f.PageActions.addNotification("Playlist loop is off","loop-off")}))}},{key:"onPlaylistSaveUpdate",value:function(){var e=this;this.setState({savedPlaylist:o.PlaylistViewStore.get("saved-playlist")},(function(){e.state.savedPlaylist?f.PageActions.addNotification("Added to playlists library","added-to-playlists-lib"):f.PageActions.addNotification("Removed from playlists library","removed-from-playlists-lib")}))}},{key:"render",value:function(){return a.createElement("div",{className:"playlist-view-wrap"},a.createElement("div",{className:"playlist-view"+(this.state.expanded?" playlist-expanded-view":"")},a.createElement("div",{className:"playlist-header"},a.createElement("div",{className:"playlist-title"},a.createElement("a",{href:this.state.link,title:this.state.title},this.state.title)),a.createElement("div",{className:"playlist-meta"},a.createElement("span",null,a.createElement("a",{href:this.state.authorLink,title:this.state.authorName},this.state.authorName)),"  -  ",a.createElement("span",{className:"counter"},this.state.activeItem," / ",this.state.totalMedia)),a.createElement(z.CircleIconButton,{className:"toggle-playlist-view",onClick:this.onHeaderClick},this.state.expanded?a.createElement("i",{className:"material-icons"},"keyboard_arrow_up"):a.createElement("i",{className:"material-icons"},"keyboard_arrow_down"))),this.state.expanded?a.createElement("div",{className:"playlist-actions"},a.createElement(z.CircleIconButton,{className:this.state.loopRepeat?"active":"",onClick:this.onLoopClick,title:"Loop playlist"},a.createElement("i",{className:"material-icons"},"repeat"))):null,this.state.expanded&&this.state.items.length?a.createElement("div",{className:"playlist-media"},a.createElement(Yt,{items:this.state.items,playlistActiveItem:this.state.activeItem})):null))}}])&&Qt(t.prototype,n),s}(a.PureComponent);function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?ln(e):t}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}tn.propTypes={playlistData:s().object.isRequired,activeItem:m.PositiveIntegerOrZero},tn.defaultProps={};var sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(u,e);var t,n,r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=un(r);if(i){var n=un(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return on(this,e)});function u(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={playlistData:e.playlistData,isPlaylistPage:!!e.playlistData,activeItem:0,mediaType:o.MediaPageStore.get("media-type")},e.playlistData)for(var n=0;n<e.playlistData.playlist_media.length;){if(e.mediaId===e.playlistData.playlist_media[n].friendly_token){t.state.activeItem=n+1;break}n+=1}return t.onMediaLoad=t.onMediaLoad.bind(ln(t)),t}return t=u,(n=[{key:"componentDidMount",value:function(){o.MediaPageStore.on("loaded_media_data",this.onMediaLoad)}},{key:"onMediaLoad",value:function(){this.setState({mediaType:o.MediaPageStore.get("media-type")})}},{key:"render",value:function(){return a.createElement("div",{className:"viewer-sidebar"},this.state.isPlaylistPage?a.createElement(tn,{activeItem:this.state.activeItem,playlistData:this.props.playlistData}):"video"===this.state.mediaType||"audio"===this.state.mediaType?a.createElement(qt,null):null,a.createElement(Zt,{hideFirst:!this.state.isPlaylistPage}))}}])&&rn(t.prototype,n),u}(a.PureComponent);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?pn(e):t}function pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(u,e);var t,n,r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yn(r);if(i){var n=yn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fn(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e,"media")).state={wideLayout:1216<=window.innerWidth,mediaLoaded:!1,mediaLoadFailed:!1,isVideoMedia:!1,theaterMode:!1,pagePlaylistLoaded:!1,pagePlaylistData:o.MediaPageStore.get("playlist-data")},t.onWindowResize=t.onWindowResize.bind(pn(t)),t.onMediaLoad=t.onMediaLoad.bind(pn(t)),t.onMediaLoadError=t.onMediaLoadError.bind(pn(t)),t.onPagePlaylistLoad=t.onPagePlaylistLoad.bind(pn(t)),o.MediaPageStore.on("loaded_media_data",t.onMediaLoad),o.MediaPageStore.on("loaded_media_error",t.onMediaLoadError),o.MediaPageStore.on("loaded_page_playlist_data",t.onPagePlaylistLoad),t}return t=u,(n=[{key:"componentDidMount",value:function(){f.MediaPageActions.loadMediaData(),o.PageStore.on("window_resize",this.onWindowResize)}},{key:"onWindowResize",value:function(){this.setState({wideLayout:1216<=window.innerWidth})}},{key:"onPagePlaylistLoad",value:function(){this.setState({pagePlaylistLoaded:!0,pagePlaylistData:o.MediaPageStore.get("playlist-data")})}},{key:"onMediaLoad",value:function(){var e="video"===o.MediaPageStore.get("media-type");e?(this.onViewerModeChange=this.onViewerModeChange.bind(this),o.VideoViewerStore.on("changed_viewer_mode",this.onViewerModeChange),this.setState({mediaLoaded:!0,isVideoMedia:e,theaterMode:o.VideoViewerStore.get("in-theater-mode")})):this.setState({mediaLoaded:!0,isVideoMedia:e})}},{key:"onViewerModeChange",value:function(){this.setState({theaterMode:o.VideoViewerStore.get("in-theater-mode")})}},{key:"onMediaLoadError",value:function(e){this.setState({mediaLoadFailed:!0})}},{key:"pageContent",value:function(){var e="cf viewer-section"+(this.state.theaterMode?" theater-mode":" viewer-wide"),t="viewer-section-nested"+(this.state.theaterMode?" viewer-section":"");return this.state.mediaLoadFailed?a.createElement("div",{className:e},a.createElement(Ut,null)):a.createElement("div",{className:e},[a.createElement("div",{className:"viewer-container",key:"viewer-container"},this.state.mediaLoaded&&this.state.pagePlaylistLoaded?this.viewerContainerContent(o.MediaPageStore.get("media-data")):null),a.createElement("div",{key:"viewer-section-nested",className:t},!this.state.wideLayout||this.state.isVideoMedia&&this.state.theaterMode?[a.createElement(It,{key:"viewer-info"}),this.state.pagePlaylistLoaded?a.createElement(sn,{key:"viewer-sidebar",mediaId:o.MediaPageStore.get("media-id"),playlistData:o.MediaPageStore.get("playlist-data")}):null]:[this.state.pagePlaylistLoaded?a.createElement(sn,{key:"viewer-sidebar",mediaId:o.MediaPageStore.get("media-id"),playlistData:o.MediaPageStore.get("playlist-data")}):null,a.createElement(It,{key:"viewer-info"})])])}}])&&dn(t.prototype,n),u}(n(8204).T);function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}if(window.MediaCMS.site.devEnv){var Pn=function(){var e=null,t=null,n=window.location.search.split("?")[1];return n&&n.split("&").forEach((function(n){0===n.indexOf("m=")?e=n.split("m=")[1]:0===n.indexOf("pl=")&&(t=n.split("pl=")[1])})),{mediaId:e,playlistId:t}}(),kn=Pn.mediaId,_n=Pn.playlistId;kn&&(window.MediaCMS.mediaId=kn),_n&&(window.MediaCMS.playlistId=_n)}var Mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(c,e);var t,n,r,u,s=(r=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=En(r);if(u){var n=En(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sn(this,e)});function c(){return vn(this,c),s.apply(this,arguments)}return t=c,(n=[{key:"viewerContainerContent",value:function(e){switch(o.MediaPageStore.get("media-type")){case"video":return a.createElement(i.SiteConsumer,null,(function(t){return a.createElement(V,{data:e,siteUrl:t.url,inEmbed:!1})}));case"audio":return a.createElement(P,null);case"image":return a.createElement(_,null);case"pdf":return a.createElement(M,null)}return a.createElement(l,null)}}])&&bn(t.prototype,n),c}(hn);(0,r.X)("page-media",Mn)},4234:function(e,t,n){"use strict";n.d(t,{CircleIconButton:function(){return r.M},MaterialIcon:function(){return a.O},NavigationContentApp:function(){return i.o},NavigationMenuList:function(){return o.S},Notifications:function(){return l.T},NumericInputWithUnit:function(){return u.O},PopupMain:function(){return s.W8},PopupTop:function(){return s.HF},SpinnerLoader:function(){return c.i},UserThumbnail:function(){return d.q}});var r=n(7714),a=(n(7446),n(2915),n(2299)),i=n(2917),o=n(5671),l=n(2436),u=n(5517),s=n(940),c=n(6309),d=n(6142)},2436:function(e,t,n){"use strict";n.d(t,{T:function(){return d}}),n(2070),n(1646),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655),n(288),n(4458),n(3675);var r=n(5466),a=n(7959);function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=[];function c(e){var t=o((0,r.useState)(!1),2),n=t[0],a=t[1],i=o((0,r.useState)(!0),2),l=i[0],u=i[1],s=null,c=null;return(0,r.useEffect)((function(){return s=setTimeout((function(){c=setTimeout((function(){u(!1),c=null}),1e3),s=null,a(!0),e.onHide(e.id)}),5e3),function(){s&&clearTimeout(s),c&&clearTimeout(c)}}),[]),l?r.createElement("div",{className:"notification-item"+(n?" hidden":"")},r.createElement("div",null,e.children||null)):null}function d(){var e,t,n,l=o((0,r.useState)(s.length),2),u=l[0],d=l[1];function m(){d(a.default.get("notifications-size")+s.length)}function f(e){var t=[];s.map((function(n){n[0]!==e&&t.push(n)})),s=t}return(0,r.useEffect)((function(){return m(),a.default.on("added_notification",m),function(){return a.default.removeListener("added_notification",m)}}),[]),u?r.createElement("div",{className:"notifications"},r.createElement("div",null,(e=a.default.get("notifications"),t=s.map((function(e){return r.createElement(c,{key:e[0],id:e[0],onHide:f},e[1])})),n=e.map((function(e){return s.push(e),r.createElement(c,{key:e[0],id:e[0],onHide:f},e[1])})),[].concat(i(t),i(n))))," "):null}},5517:function(e,t,n){"use strict";n.d(t,{O:function(){return u}}),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655),n(288),n(4458),n(3675);var r=n(5466),a=n(3074),i=n.n(a);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){var t=(0,r.useRef)(null),n=(0,r.useRef)(null),a=o((0,r.useState)(null),2),i=a[0],l=a[1],u=o((0,r.useState)(null),2),s=u[0],c=u[1];return(0,r.useEffect)((function(){l(function(e,t,n){if(void 0!==e){var r;return r=void 0!==t&&t>e?t:e,void 0!==n&&n<r?n:r}return void 0!==t?t:void 0!==n?n:void 0}(0+e.defaultValue,e.minValue,e.maxValue)),c(function(e,t){if(!t||!t.length)return null;for(var n=0;n<t.length;){if(void 0!==t[n].key&&e===t[n].key)return t[n].key;n+=1}return t[0].key}(e.defaultUnit,e.units))})),r.createElement("div",{className:"num-value-unit"},void 0!==e.label?r.createElement("span",{className:"label"},e.label):null,r.createElement("input",{ref:t,className:"value-input",type:"number",value:null!==i?i:"",min:void 0!==e.minValue?e.minValue:null,max:void 0!==e.maxValue?e.maxValue:null,onChange:function(){l(t.current.value),void 0!==e.valueCallback&&e.valueCallback(t.current.value)}}),r.createElement("select",{ref:n,className:"value-unit",onChange:function(){c(n.current.value),void 0!==e.unitCallback&&e.unitCallback(n.current.value)},value:null!==s?s:""},function(){if(!e.units.length)return null;for(var t=[],n=0;n<e.units.length;)void 0!==e.units[n].key&&t.push(r.createElement("option",{key:e.units[n].key,value:e.units[n].key},void 0!==e.units[n].label?e.units[n].label:e.units[n].key)),n+=1;return t}()))}u.propTypes={label:i().string,units:i().array.isRequired,defaultUnit:i().string,defaultValue:i().number,minValue:i().number,maxValue:i().number,valueCallback:i().func,unitCallback:i().func}},6309:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(5466),a=n(3074),i=n.n(a);function o(e){var t="spinner-loader";switch(e.size){case"tiny":case"x-small":case"small":case"large":case"x-large":t+=" "+e.size}return r.createElement("div",{className:t},r.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},r.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"1.5",strokeMiterlimit:"10"})))}o.propTypes={size:i().oneOf(["tiny","x-small","small","medium","large","x-large"])},o.defaultProps={size:"medium"}},6142:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(5466),a=n(3074),i=n.n(a),o=n(9747),l=n(7714),u=n(2299);function s(e){var t=(0,o.useUser)().thumbnail,n={"aria-label":"Account profile photo that opens list of options and settings pages links",className:"thumbnail"};switch(e.isButton?void 0!==e.onClick&&(n.onClick=e.onClick):n.type="span",e.size){case"small":case"large":n.className+=" "+e.size+"-thumb"}return r.createElement(l.M,n,t?r.createElement("img",{src:t,alt:""}):r.createElement(u.O,{type:"person"}))}s.propTypes={isButton:i().bool,size:i().oneOf(["small","medium","large"]),onClick:i().func},s.defaultProps={isButton:!1,size:"medium"}},6191:function(e,t,n){"use strict";n.d(t,{PageHeader:function(){return r.m},PageMain:function(){return a.r},PageSidebar:function(){return i.$}});var r=n(6006),a=n(9198),i=n(2947);n(1542)},160:function(e,t,n){"use strict";n.d(t,{R:function(){return h}}),n(2322),n(9268),n(9751),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655),n(288),n(4458),n(3675);var r=n(5466),a=n(3074),i=n.n(a),o=n(137),l=n.n(o),u=n(3613),s=n(473),c=n(9722),d=n(9905),m=n(8727),f=n(1283);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=(0,r.useContext)(u.ApiUrlContext),n=(0,r.useContext)(u.SiteContext),a=p((0,r.useState)(null),2),i=(a[0],a[1]),o=p((0,r.useState)(null),2),y=o[0],h=o[1],g=p((0,r.useState)(null),2),v=g[0],b=g[1],w=p((0,r.useState)([]),2),S=w[0],E=w[1],P=p((0,r.useState)({}),2),k=P[0],_=P[1],M=p((0,r.useState)([]),2),A=M[0],C=M[1],x=p((0,r.useState)({}),2),N=x[0],O=x[1],I={videoQuality:new c.BrowserCache(n.id,86400).get("video-quality")};I.videoQuality=null!==I.videoQuality?I.videoQuality:"Auto";var T,j=null,R=null,L=null,V=((T=new(l())(e.pageLink).query)?((T=T.substring(1)).split("&"),T=T.length?T.split("="):[]):T=[],T);if(V.length)for(var D=0;D<V.length;)"m"===V[D]&&(L=V[D+1]),D+=2;function U(e){if(void 0!==e&&e&&void 0!==e.data&&e.data){var t,r;R=e.data;var a=[],o=null,l=(0,d.RA)(R.encodings_info,R.hls_info),u=null,c=null;if("string"==typeof R.poster_url?o=(0,s.formatInnerLink)(R.poster_url,n.url):"string"==typeof R.thumbnail_url&&(o=(0,s.formatInnerLink)(R.thumbnail_url,n.url)),Object.keys(l).length){var m=(0,d.KC)(),p=I.videoQuality;(null===p||"Auto"===p&&void 0===l.Auto)&&(p=720);var y=(0,d.$e)(p,l);for("Auto"===p&&void 0!==l.Auto&&a.push({src:l.Auto.url[0]}),r=0;r<l[y].format.length;){if("hls"===l[y].format[r]){a.push({src:l[y].url[r]});break}r+=1}for(r in R.encodings_info[y])R.encodings_info[y].hasOwnProperty(r)&&m.support[r]&&(t=R.encodings_info[y][r].url)&&(t=(0,s.formatInnerLink)(t,n.url),a.push({src:t,encodings_status:R.encodings_info[y][r].status}))}else l=null;if(1===a.length&&"running"===a[0].encodings_status&&(u="encodingRunning",c="Media encoding is currently running. Try again in few minutes."),null!==u)switch(u){case"encodingRunning":case"encodingPending":case"encodingFailed":break;default:f.warn("VIDEO DEBUG:","Video files don't exist")}i(u),h(c),b(o),E(a),_(l),C(R.subtitles_info),O(R.sprites_url?{url:(0,s.formatInnerLink)(R.sprites_url,n.url),frame:{width:160,height:90,seconds:10}}:null);var g=document.querySelector(".feat-first-item .item .item-description > div");g&&(g.innerHTML=R.summary)}}function B(e){if(void 0!==e&&void 0!==e.type)switch(e.type){case"network":case"private":case"unavailable":i(e.type),h(void 0!==e.message?e.message:"Αn error occurred while loading the media's data")}}return null!==L&&(j=t.media+"/"+L),(0,r.useEffect)((function(){null!==j&&(0,s.getRequest)(j,!1,U,B)}),[]),S.length?r.createElement("div",{className:"video-player"},r.createElement(m.Y7,{siteId:n.id,siteUrl:n.url,info:k,sources:S,poster:v,previewSprite:N,subtitlesInfo:A,enableAutoplay:!1,inEmbed:!1,hasTheaterMode:!1,hasNextLink:!1,hasPreviousLink:!1,errorMessage:y})):null}h.propTypes={pageLink:i().string.isRequired}},8204:function(e,t,n){"use strict";n.d(t,{T:function(){return m}}),n(5101),n(3080),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655);var r=n(5466),a=n(541),i=n(6191),o=n(4234);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,l,m,f=(l=p,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(l);if(m){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function p(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,e),void 0!==t&&a.PageActions.initPage(t),n}return t=p,(n=[{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(i.PageMain,null,this.pageContent()),r.createElement(o.Notifications,null))}}])&&u(t.prototype,n),p}(r.PureComponent)},2083:function(e,t,n){var r=n(4835).Dispatcher;e.exports=new r},1450:function(e,t,n){"use strict";function r(){var e,t,n,r=null;if(document.cookie&&""!==document.cookie)for(t=document.cookie.split(";"),e=0;e<t.length;){if("csrftoken="===(n=t[e].trim()).substring(0,10)){r=decodeURIComponent(n.substring(10));break}e+=1}return r}n.d(t,{o:function(){return r}}),n(2322),n(9268),n(3233)},9039:function(e,t,n){"use strict";n.d(t,{O:function(){return o},a:function(){return l}}),n(1646),n(288),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655),n(3675),n(4458);var r=n(4646);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){var r,i;switch(n){case TypeError:case RangeError:case SyntaxError:case ReferenceError:r=new n(t[0]);break;default:r=new Error(t[0])}return e.apply(void 0,[r.message].concat(function(e){if(Array.isArray(e))return a(e)}(i=t.slice(1))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),r}function o(e,t){return i(r.v,e,t)}function l(e,t){return i(r.Z,e,t)}},9264:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2083);function a(e,t){return r.register(e[t].bind(e)),e}},1397:function(e,t,n){"use strict";n.d(t,{U:function(){return i}}),n(2322),n(3296),n(6394),n(4669);var r=n(137),a=n.n(r);function i(e,t){var n=a()(e,{});return""!==n.origin&&"null"!==n.origin&&n.origin||(n=a()(t+"/"+e.replace(/^\//g,""),{})),n.toString()}},705:function(e,t,n){"use strict";function r(e,t){function n(e,t,n){return Number(parseFloat(e/t).toFixed(e<10*t?1:0))+n}return t?e.toLocaleString():function(e,t,r,a,i,o){for(;t>=a;)i*=r,a*=r,e+=1;return e<o.length?n(t,i,o[e]):n(t*(r*(e-(o.length-1))),i,o[o.length-1])}(0,e,1e3,1e3,1,["","K","M","B","T"])}n.d(t,{Z:function(){return r}}),n(717),n(6660)},4646:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},v:function(){return u}}),n(288),n(1646),n(2004),n(8407),n(6394),n(8288),n(5677),n(2129),n(4655),n(3675),n(4458);var r=n(1283);function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r)[n[0]].apply(e,a(n.slice(1)))},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(void 0,["warn"].concat(t))},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(void 0,["error"].concat(t))}},408:function(e,t,n){"use strict";n.d(t,{aP:function(){return i},ZU:function(){return o},$A:function(){return l}}),n(5777);var r=function(e){return e===Math.trunc(e)},a=function(e){return function(e,t){return e>0}(e)},i=function(e){return r(e)&&a(e)},o=function(e){return r(e)&&(a(e)||function(e){return 0===e}(e))},l=function e(t,n){return n?e(n,t%n):t}},447:function(e,t,n){"use strict";n.d(t,{A_:function(){return l},j0:function(){return s},GH:function(){return d},Jl:function(){return f}}),n(7588),n(6394),n(5334);var r=n(4559),a=n.n(r);function i(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){i(o,r,a,l,u,"next",e)}function u(e){i(o,r,a,l,u,"throw",e)}l(void 0)}))}}function l(e,t,n,r){return u.apply(this,arguments)}function u(){return(u=o(regeneratorRuntime.mark((function e(t,n,a,i){var o,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e){if(i instanceof Function){var t=e;if(void 0===e.response)t={type:"network",error:e};else if(void 0!==e.response.status)switch(e.response.status){case 401:t={type:"private",error:e,message:"Media is private"};break;case 400:t={type:"unavailable",error:e,message:"Media is unavailable"}}i(t)}},l=function(e){a instanceof Function&&a(e)},o={timeout:null,maxContentLength:null,withCredentials:!0},!n){e.next=8;break}return e.next=6,(0,r.get)(t,o).then(l).catch(u||null);case 6:e.next=9;break;case 8:(0,r.get)(t,o).then(l).catch(u||null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e,t,n,r,a,i){return c.apply(this,arguments)}function c(){return(c=o(regeneratorRuntime.mark((function e(t,n,a,i,o,l){var u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){l instanceof Function&&l(e)},u=function(e){o instanceof Function&&o(e)},n=n||{},!i){e.next=8;break}return e.next=6,(0,r.post)(t,n,a||null).then(u).catch(s||null);case 6:e.next=9;break;case 8:(0,r.post)(t,n,a||null).then(u).catch(s||null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,n,r,a,i){return m.apply(this,arguments)}function m(){return(m=o(regeneratorRuntime.mark((function e(t,n,a,i,o,l){var u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){l instanceof Function&&l(e)},u=function(e){o instanceof Function&&o(e)},n=n||{},!i){e.next=8;break}return e.next=6,(0,r.put)(t,n,a||null).then(u).catch(s||null);case 6:e.next=9;break;case 8:(0,r.put)(t,n,a||null).then(u).catch(s||null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n,r,a){return p.apply(this,arguments)}function p(){return(p=o(regeneratorRuntime.mark((function e(t,n,r,i,o){var l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e){o instanceof Function&&o(e)},l=function(e){i instanceof Function&&i(e)},n=n||{},!r){e.next=8;break}return e.next=6,a().delete(t,n||null).then(l).catch(u||null);case 6:e.next=9;break;case 8:a().delete(t,n||null).then(l).catch(u||null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7959:function(e,t,n){"use strict";n.r(t),n(5677),n(6394),n(506),n(3224),n(597),n(3543),n(5210),n(5785),n(91),n(9595),n(3357),n(1816),n(5292),n(7445),n(4875),n(1608),n(2994),n(284),n(601),n(9494),n(6229),n(9149),n(9503),n(9617),n(1962),n(8097),n(2322),n(3296),n(4669),n(7441),n(2070),n(3675),n(2129),n(9268),n(2004),n(8407),n(8288),n(4655),n(288),n(4458),n(5101),n(3080);var r,a=n(1590),i=n.n(a),o=n(9722),l=n(473),u=n(9479);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=null,g=null,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(v,e);var t,n,a,i,s=(a=v,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(a);if(i){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),t=s.call(this),g=(0,u.config)(window.MediaCMS),r=new o.BrowserCache(g.site.id,86400),(h={mediaAutoPlay:r.get("media-auto-play")}).mediaAutoPlay=null===h.mediaAutoPlay||h.mediaAutoPlay,t.browserEvents=(0,l.BrowserEvents)(),t.browserEvents.doc(t.onDocumentVisibilityChange.bind(f(t))),t.browserEvents.win(t.onWindowResize.bind(f(t)),t.onWindowScroll.bind(f(t))),t.notifications=function(e){var t=[];function n(e){var n;"string"==typeof e&&t.push([(n=new Uint32Array(3),window.crypto.getRandomValues(n),(performance.now().toString(36)+Array.from(n).map((function(e){return e.toString(36)})).join("")).replace(/./g,""+Math.random()+Intl.DateTimeFormat().resolvedOptions().timeZone+Date.now())),e])}return e.map(n),{size:function(){return t.length},push:n,clear:function(){t=[]},messages:function(){return function(e){if(Array.isArray(e))return y(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var e}}}(void 0!==window.MediaCMS&&void 0!==window.MediaCMS.notifications?window.MediaCMS.notifications:[]),t}return t=v,(n=[{key:"onDocumentVisibilityChange",value:function(){this.emit("document_visibility_change")}},{key:"onWindowScroll",value:function(){this.emit("window_scroll")}},{key:"onWindowResize",value:function(){this.emit("window_resize")}},{key:"initPage",value:function(e){h.currentPage=e}},{key:"get",value:function(e){var t,n;switch(e){case"browser-cache":t=r;break;case"media-auto-play":t=h.mediaAutoPlay;break;case"config-contents":t=g.contents;break;case"config-enabled":t=g.enabled;break;case"config-media-item":t=g.media.item;break;case"config-options":t=g.options;break;case"config-site":t=g.site;break;case"api-playlists":n=e.split("-")[1],t=g.api[n]||null;break;case"notifications-size":t=this.notifications.size();break;case"notifications":t=this.notifications.messages(),this.notifications.clear();break;case"current-page":t=h.currentPage}return t}},{key:"actions_handler",value:function(e){switch(e.type){case"INIT_PAGE":this.initPage(e.page),this.emit("page_init");break;case"TOGGLE_AUTO_PLAY":h.mediaAutoPlay=!h.mediaAutoPlay,r.set("media-auto-play",h.mediaAutoPlay),this.emit("switched_media_auto_play");break;case"ADD_NOTIFICATION":this.notifications.push(e.notification),this.emit("added_notification")}}}])&&c(t.prototype,n),v}(i());t.default=(0,l.exportStore)(new v,"actions_handler")},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selected=t.enabled=t.translations=t.labels=void 0;var r=n(6316),a=n(9722),i=n(9479).config(window.MediaCMS).site.id,o=new a.BrowserCache("MediaCMS["+i+"][language]");t.labels={en:"English",ko:"한국어"},t.translations={en:r.en,ko:r.ko},t.enabled=Object.keys(t.translations),t.selected=o.get("code")||"ko"}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,r.amdO={},e=[],r.O=function(t,n,a,i){if(!n){var o=1/0;for(s=0;s<e.length;s++){n=e[s][0],a=e[s][1],i=e[s][2];for(var l=!0,u=0;u<n.length;u++)(!1&i||o>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(l=!1,i<o&&(o=i));l&&(e.splice(s--,1),t=a())}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,a,i]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=411,function(){var e={411:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,o=n[0],l=n[1],u=n[2],s=0;for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(u)var c=u(r);for(t&&t(n);s<o.length;s++)i=o[s],r.o(e,i)&&e[i]&&e[i][0](),e[o[s]]=0;return r.O(c)},n=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[431],(function(){return r(3683)}));a=r.O(a)}();